webpackJsonp([1],{"/OMQ":function(t,e){},"30nI":function(t,e){},"90tG":function(t,e){},IsXw:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("+RKF"),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",[t._v(t._s(t.navList[t.navIndex].navItem))]),t._v(" "),a("el-container",[a("el-aside",{attrs:{width:"150px"}},[a("el-col",{attrs:{span:2}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.$route.path,router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[t._l(t.navList,function(e,s){return[e.subItems?a("el-submenu",[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-platform"}),a("span",[t._v(" "+t._s(e.navItem))])]),t._v(" "),t._l(e.subItems,function(e,s){return a("el-menu-item",{key:s,attrs:{index:e.name},on:{click:function(e){return t.itemclick(s)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-platform"}),a("span",[t._v(" "+t._s(e.navItem))])])],2)})],2):a("el-menu-item",{key:s,attrs:{index:e.name},on:{click:function(e){return t.itemclick(s)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-platform"}),a("span",[t._v(" "+t._s(e.navItem))])])],2)]})],2)],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")({data:function(){return{navIndex:0,navList:[{name:"/components/pubstores",navItem:"商家发布"},{name:"/components/stores",navItem:"商家列表"},{name:"/components/storegroups",navItem:"商家分组"},{name:"/components/plates",navItem:"推荐板块"},{name:"/components/coupons",navItem:"板块详情"},{name:"/components/users",navItem:"用户列表"},{name:"/components/events",navItem:"活动列表"},{name:"/components/finance",navItem:"财务板块"},{name:"/components/withdraws",navItem:"提现板块"},{name:"/components/orders",navItem:"订单列表"},{name:"/components/couponrules",navItem:"优惠券设置"},{name:"/components/others",navItem:"其他杂项"}]}},methods:{itemclick:function(t){this.navIndex=t}},mounted:function(){}},l,!1,function(t){a("qWqI")},null,null).exports,o=a("bAj6"),r=a("L+OJ"),i=a.n(r),c=a("gU9C"),u=a.n(c),p={data:function(){return{plates:[],dialogFormVisible:!1,newPlate:{title:"",index:-1,image:"",linkTo:""},links:[{value:"1",label:"超实惠"},{value:"2",label:"最新鲜"},{value:"3",label:"生活丽人"},{value:"4",label:"食在上饶"},{value:"5",label:"玩乐途游"},{value:"6",label:"附近商家"}]}},methods:{doAddNewPlate:function(){var t=this;if(this.newPlate.title)if(-1!=this.newPlate.index)if(this.newPlate.image)if(this.newPlate.linkTo){var e=c.Loading.service({fullscreen:!0});this.newPlate.tp=1,i.a.post("http://localhost:8090/addplate",this.newPlate).then(function(a){e.close(),200!=a.status?t.$message.error("更新失败"):(t.dialogFormVisible=!1,console.log(a.data),t.plates.push({_id:a.data._id,title:a.data.title,index:a.data.index,items:a.data.items}),t.$message.success("成功")),t.newPlate.title="",t.newPlate.index=-1,t.newPlate.image="",t.newPlate.linkTo=""})}else this.$message.error("请选择跳转连接");else this.$message.error("请上传板块图片");else this.$message.error("请输入展示位置");else this.$message.error("请输入板块标题")},onNewPlateImageUploadSuccess:function(t){this.newPlate.image=t},edit:function(t){this.$router.push({name:"coupons",params:{_id:t._id}})},hide:function(t,e){var a=this;i.a.post("http://localhost:8090/proxy",{tp:"switchplatestatus",_id:t._id,status:0}).then(function(t){200==t.status?(a.$message.success("已隐藏"),a.plates[e].status=0):a.$message.error("操作失败")})},show:function(t,e){var a=this;i.a.post("http://localhost:8090/proxy",{tp:"switchplatestatus",_id:t._id,status:1}).then(function(t){200==t.status?(a.$message.success("已显示"),a.plates[e].status=1):a.$message.error("操作失败")})},addPlate:function(){this.dialogFormVisible=!0},submitUpload:function(t){switch(t){case 10:this.$refs.newPlate.submit()}}},mounted:function(){var t=this;i.a.get("http://localhost:8090/plates").then(function(e){t.plates=e.data.data})}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.plates}},[a("el-table-column",{attrs:{label:"标题",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"位置",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.index))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("正常显示")]):t._e(),t._v(" "),0===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已隐藏")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.hide(e.row,e.$index)}}},[t._v("隐藏")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.show(e.row,e.$index)}}},[t._v("显示")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增板块",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("标题：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.newPlate.title,callback:function(e){t.$set(t.newPlate,"title",e)},expression:"newPlate.title"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("位置：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入位置",clearable:""},model:{value:t.newPlate.index,callback:function(e){t.$set(t.newPlate,"index",e)},expression:"newPlate.index"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"newPlate",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onNewPlateImageUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(10)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("跳转连接：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{filterable:"",placeholder:"跳转连接"},model:{value:t.newPlate.linkTo,callback:function(e){t.$set(t.newPlate,"linkTo",e)},expression:"newPlate.linkTo"}},t._l(t.links,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doAddNewPlate}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addPlate}},[t._v("新增板块")])],1)},staticRenderFns:[]};var h=a("C7Lr")(p,d,!1,function(t){a("30nI")},null,null).exports,v={data:function(){return{id:this.$route.params._id,q:"",plate:{items:[]},stores:[],storeIndex:"",dialogFormVisible:!1,itemImage:"",plateImageList:[],links:[{value:"1",label:"超实惠"},{value:"2",label:"最新鲜"},{value:"3",label:"生活丽人"},{value:"4",label:"食在上饶"},{value:"5",label:"玩乐途游"},{value:"6",label:"附近商家"}]}},methods:{onSelectChange:function(t){console.log(t)},handleDelete:function(t,e){e.splice(t,1)},addNewList:function(){var t=this;i.a.post("http://localhost:8090/stores",{q:this.q,currentPage:1,pageSize:20}).then(function(e){t.stores=e.data.data}),this.dialogFormVisible=!0},doAddNewList:function(){if(""!==this.storeIndex)if(this.itemImage){var t=this.stores[this.storeIndex];this.plate.items.push({storeId:t._id,title:t.storeName,discount:t.discount,image:this.itemImage,desc:t.storeDesc}),this.storeIndex="",this.itemImage="",this.dialogFormVisible=!1}else this.$message.error("请上传推广图片");else this.$message.error("请选择商家")},onItemUploadSuccess:function(t){this.itemImage=t},onUploadPlateImageSuccess:function(t){this.plate.image=t},submitUpload:function(t){switch(t){case 1:this.$refs.plateImage.submit();break;case 2:this.$refs.item.submit()}},doUpdate:function(){var t=this;this.id?(this.plate.tp=2,i.a.post("http://localhost:8090/updateplate",this.plate).then(function(e){200!=e.status?t.$message.error("更新失败"):t.$message.success("成功")})):this.$message.error("请从推荐板块进入此页面")}},mounted:function(){var t=this;this.id&&i.a.get("http://localhost:8090/plate?id="+this.id).then(function(e){t.plate=e.data.data})}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("板块名称：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.plate.title,callback:function(e){t.$set(t.plate,"title",e)},expression:"plate.title"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("跳转连接：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{filterable:"",placeholder:"跳转连接"},model:{value:t.plate.linkTo,callback:function(e){t.$set(t.plate,"linkTo",e)},expression:"plate.linkTo"}},t._l(t.links,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("板块位置：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.plate.index,callback:function(e){t.$set(t.plate,"index",e)},expression:"plate.index"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("板块图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"plateImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.plateImageList,"on-success":t.onUploadPlateImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20}},[t._v("推荐列表")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.plate.items}},[a("el-table-column",{attrs:{label:"商家ID",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.storeId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.discount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"描述信息",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.desc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,t.plate.items)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增推荐",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{filterable:"",placeholder:"搜索商家"},model:{value:t.storeIndex,callback:function(e){t.storeIndex=e},expression:"storeIndex"}},t._l(t.stores,function(t,e){return a("el-option",{key:t._id,attrs:{label:t.storeName,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"item",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/uploadresize","on-success":t.onItemUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(2)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doAddNewList}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addNewList}},[t._v("新增一条推荐")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:t.doUpdate}},[t._v("更新本页")])],1)},staticRenderFns:[]};var g=a("C7Lr")(v,m,!1,function(t){a("tbm1")},null,null).exports,f={data:function(){return{id:this.$route.params._id,tmpFiles:[],mapVisible:!1,storeName:"",storeDesc:"",startTime:"",endTime:"",options:[{value:0,label:"0.0 折"},{value:.1,label:"0.1 折"},{value:.2,label:"0.2 折"},{value:.3,label:"0.3 折"},{value:.4,label:"0.4 折"},{value:.5,label:"0.5 折"},{value:.6,label:"0.6 折"},{value:.7,label:"0.7 折"},{value:.8,label:"0.8 折"},{value:.9,label:"0.9 折"},{value:1,label:"1.0 折"},{value:1.1,label:"1.1 折"},{value:1.2,label:"1.2 折"},{value:1.3,label:"1.3 折"},{value:1.4,label:"1.4 折"},{value:1.5,label:"1.5 折"},{value:1.6,label:"1.6 折"},{value:1.7,label:"1.7 折"},{value:1.8,label:"1.8 折"},{value:1.9,label:"1.9 折"},{value:2,label:"2.0 折"},{value:2.1,label:"2.1 折"},{value:2.2,label:"2.2 折"},{value:2.3,label:"2.3 折"},{value:2.4,label:"2.4 折"},{value:2.5,label:"2.5 折"},{value:2.6,label:"2.6 折"},{value:2.7,label:"2.7 折"},{value:2.8,label:"2.8 折"},{value:2.9,label:"2.9 折"},{value:3,label:"3.0 折"},{value:3.1,label:"3.1 折"},{value:3.2,label:"3.2 折"},{value:3.3,label:"3.3 折"},{value:3.4,label:"3.4 折"},{value:3.5,label:"3.5 折"},{value:3.6,label:"3.6 折"},{value:3.7,label:"3.7 折"},{value:3.8,label:"3.8 折"},{value:3.9,label:"3.9 折"},{value:4,label:"4.0 折"},{value:4.1,label:"4.1 折"},{value:4.2,label:"4.2 折"},{value:4.3,label:"4.3 折"},{value:4.4,label:"4.4 折"},{value:4.5,label:"4.5 折"},{value:4.6,label:"4.6 折"},{value:4.7,label:"4.7 折"},{value:4.8,label:"4.8 折"},{value:4.9,label:"4.9 折"},{value:5,label:"5.0 折"},{value:5.1,label:"5.1 折"},{value:5.2,label:"5.2 折"},{value:5.3,label:"5.3 折"},{value:5.4,label:"5.4 折"},{value:5.5,label:"5.5 折"},{value:5.6,label:"5.6 折"},{value:5.7,label:"5.7 折"},{value:5.8,label:"5.8 折"},{value:5.9,label:"5.9 折"},{value:6,label:"6.0 折"},{value:6.1,label:"6.1 折"},{value:6.2,label:"6.2 折"},{value:6.3,label:"6.3 折"},{value:6.4,label:"6.4 折"},{value:6.5,label:"6.5 折"},{value:6.6,label:"6.6 折"},{value:6.7,label:"6.7 折"},{value:6.8,label:"6.8 折"},{value:6.9,label:"6.9 折"},{value:7,label:"7.0 折"},{value:7.1,label:"7.1 折"},{value:7.2,label:"7.2 折"},{value:7.3,label:"7.3 折"},{value:7.4,label:"7.4 折"},{value:7.5,label:"7.5 折"},{value:7.6,label:"7.6 折"},{value:7.7,label:"7.7 折"},{value:7.8,label:"7.8 折"},{value:7.9,label:"7.9 折"},{value:8,label:"8.0 折"},{value:8.1,label:"8.1 折"},{value:8.2,label:"8.2 折"},{value:8.3,label:"8.3 折"},{value:8.4,label:"8.4 折"},{value:8.5,label:"8.5 折"},{value:8.6,label:"8.6 折"},{value:8.7,label:"8.7 折"},{value:8.8,label:"8.8 折"},{value:8.9,label:"8.9 折"},{value:9,label:"9.0 折"},{value:9.1,label:"9.1 折"},{value:9.2,label:"9.2 折"},{value:9.3,label:"9.3 折"},{value:9.4,label:"9.4 折"},{value:9.5,label:"9.5 折"},{value:9.6,label:"9.6 折"},{value:9.7,label:"9.7 折"},{value:9.8,label:"9.8 折"},{value:9.9,label:"9.9 折"}],discount:9,discountDate:[],storeType:1,longitude:"",latitude:"",address:"",center:{lng:0,lat:0},zoom:15,keyword:"7hao",videoList:[],imageList:[],storeImageList:[],productImageList:[],promoteImageList:[],banners:[],storeImages:[],productImages:[],promoteImages:[],merchantName:"",merchantPhone:"",bank:"",merchantBankCard:"",thumbnail:""}},methods:{doPublish:function(){var t=this;if(this.storeName)if(this.storeDesc)if(this.startTime&&this.endTime)if(this.discount)if(2==this.discountDate.length)if(this.storeType)if(0!=this.banners.length)if(0!=this.storeImages.length)if(0!=this.productImages.length)if(0!=this.promoteImages.length)if(this.thumbnail)if(this.longitude&&this.latitude)if(this.address)if(this.merchantName)if(this.merchantPhone)if(this.bank)if(this.merchantBankCard){var e={id:this.id,storeName:this.storeName,storeDesc:this.storeDesc,startTime:this.startTime,endTime:this.endTime,discount:this.discount,discountStart:this.discountDate[0],discountEnd:this.discountDate[1],storeType:this.storeType,longitude:this.longitude,latitude:this.latitude,address:this.address,banners:this.banners,storeImages:this.storeImages,productImages:this.productImages,promoteImages:this.promoteImages,thumbnail:this.thumbnail,merchantName:this.merchantName,merchantPhone:this.merchantPhone,bank:this.bank,merchantBankCard:this.merchantBankCard},a=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/publish",e).then(function(e){200==e.status?t.$alert("发布成功"):t.$alert("发布失败"),a.close()})}else this.$message.error("请输入商家银行卡号");else this.$message.error("请输入开户行");else this.$message.error("请输入商家手机号");else this.$message.error("请输入商家姓名");else this.$message.error("请输入详细地址");else this.$message.error("请输入经纬度信息");else this.$message.error("请上传推广图片(thumbnail)");else this.$message.error("请上传推广图片");else this.$message.error("请上传产品图片");else this.$message.error("请上传门头图片");else this.$message.error("请上传至少一个轮播视频或者图片");else this.$message.error("请选择餐饮类型");else this.$message.error("请选择折扣时间");else this.$message.error("请选择折扣信息");else this.$message.error("请输入营业时间");else this.$message.error("请输入店铺描述");else this.$message.error("请输入店铺名称")},onUploadVideoSuccess:function(t){this.banners.push({isVideo:!0,url:t}),this.$message.success("上传视频成功")},onUploadImageSuccess:function(t){this.banners.push({isVideo:!1,url:t}),this.$message.success("上传图片成功")},onUploadStoreImageSuccess:function(t){this.storeImages.push(t),this.banners.push({isVideo:!1,url:t}),this.$message.success("上传店铺门头成功")},onUploadProductImageSuccess:function(t){this.productImages.push(t),this.$message.success("上传产品图片成功")},onUploadPromoteImageSuccess:function(t){this.thumbnail=t,this.promoteImages.push(t),this.banners.push({isVideo:!1,url:t}),this.$message.success("上传产品图片成功")},deleteImage:function(t,e){this.$message.success(t),this.tmpFiles.splice(e,1);for(var a=0;a<this.banners.length;a++)this.banners[a].url==t&&this.banners.splice(a,1);for(a=0;a<this.storeImages.length;a++)this.storeImages[a]==t&&this.storeImages.splice(a,1);for(a=0;a<this.productImages.length;a++)this.productImages[a]==t&&this.productImages.splice(a,1);for(a=0;a<this.promoteImages.length;a++)this.promoteImages[a]==t&&this.promoteImages.splice(a,1)},onExceed:function(){alert("超出数量")},submitUpload:function(t){switch(t){case 1:this.$refs.video.submit();break;case 2:this.$refs.image.submit();break;case 3:this.$refs.storeImage.submit();break;case 4:this.$refs.productImage.submit();break;case 5:this.$refs.promoteImage.submit()}},infohtmlset:function(t){console.log(t),this.address=t.address,this.longitude=t.point.lng,this.latitude=t.point.lat,this.mapVisible=!1}},mounted:function(){var t=this;this.center.lng=116.24,this.center.lat=40.047,this.zoom=15,this.id&&i.a.get("http://localhost:8090/store?id="+this.id).then(function(e){console.log(e.data);var a=JSON.parse(e.data.resp_data).data;t.storeName=a.storeName,t.storeDesc=a.storeDesc,t.startTime=a.startTime,t.endTime=a.endTime,t.discount=a.discount,t.discountDate=[a.discountStart,a.discountEnd],t.storeType=a.storeType,t.banners=a.banners,t.storeImages=a.storeImages,t.productImages=a.productImages,t.promoteImages=a.promoteImages,t.longitude=a.longitude,t.latitude=a.latitude,t.address=a.address,t.merchantName=a.merchantName,t.merchantPhone=a.merchantPhone,t.merchantBankCard=a.merchantBankCard,t.bank=a.bank,t.thumbnail=a.thumbnail,t.tmpFiles=e.data.file_list;for(var s=0;s<t.tmpFiles.length;s++)-1!=t.tmpFiles[s].download_url.indexOf("mp4")?t.tmpFiles[s].isVideo=!0:t.tmpFiles[s].isVideo=!1})}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("店铺名称：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.storeName,callback:function(e){t.storeName=e},expression:"storeName"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("商家描述：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入商家描述",clearable:""},model:{value:t.storeDesc,callback:function(e){t.storeDesc=e},expression:"storeDesc"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("营业时间：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"00:00",step:"00:30",end:"24:00"}},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t._v(" "),a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:t.startTime}},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("折扣信息：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"选择折扣"},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.discountDate,callback:function(e){t.discountDate=e},expression:"discountDate"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("店铺类型：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-radio-group",{model:{value:t.storeType,callback:function(e){t.storeType=e},expression:"storeType"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("餐饮")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("娱乐")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("其他")])],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("轮播视频：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"video",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.videoList,"on-success":t.onUploadVideoSuccess,"auto-upload":!1,accept:".mp4"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("轮播图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"image",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.imageList,"on-success":t.onUploadImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(2)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("店铺门头：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"storeImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.storeImageList,"on-success":t.onUploadStoreImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(3)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("产品图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"productImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.productImageList,"on-success":t.onUploadProductImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(4)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("推广图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"promoteImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/uploadresize",multiple:!0,limit:6,"file-list":t.promoteImageList,"on-success":t.onUploadPromoteImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(5)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",t._l(t.tmpFiles,function(e,s){return a("el-col",{key:s,attrs:{span:4}},[e.isVideo?a("video",{staticStyle:{width:"100px",height:"100px"},attrs:{controls:"",src:e.download_url}}):t._e(),t._v(" "),e.isVideo?t._e():a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.download_url,fit:t.cover}}),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteImage(e.fileid,s)}}},[t._v("删除")])],1)}),1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"title"},[t._v("位置信息")])])],1),t._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("经度：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{placeholder:"0.00",clearable:""},model:{value:t.longitude,callback:function(e){t.longitude=t._n(e)},expression:"longitude"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("纬度：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{placeholder:"0.00",clearable:""},model:{value:t.latitude,callback:function(e){t.latitude=t._n(e)},expression:"latitude"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.mapVisible=!t.mapVisible}}},[t._v("地图获取")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("详细地址：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.mapVisible,expression:"mapVisible"}],attrs:{span:14}},[a("el-input",{attrs:{placeholder:"搜索位置",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("baidu-map",[a("bm-view",{staticClass:"map",attrs:{center:t.center,zoom:t.zoom}}),t._v(" "),a("bm-local-search",{attrs:{keyword:t.keyword,"auto-viewport":!0},on:{infohtmlset:t.infohtmlset}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"title"},[t._v("商家信息")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("商家姓名：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:t.merchantName,callback:function(e){t.merchantName=e},expression:"merchantName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("手机号：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:t.merchantPhone,callback:function(e){t.merchantPhone=e},expression:"merchantPhone"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("开户行：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("银行卡号：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.merchantBankCard,callback:function(e){t.merchantBankCard=e},expression:"merchantBankCard"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.doPublish}},[t._v("发布商家")])],1)],1)],1)},staticRenderFns:[]};var _=a("C7Lr")(f,b,!1,function(t){a("qmLA")},null,null).exports,y=a("LqYc"),x=a.n(y),w={data:function(){return{stores:[],q:"",qrcode:"",innerVisible:!1,currentPage:1,pageSize:10,totalCount:0}},filters:{rounding:function(t){return t.toFixed(2)}},methods:{logout:function(t,e){var a=this,s=c.Loading.service({fullscreen:!0}),l={id:t._id,tp:"logout"};i.a.post("http://localhost:8090/proxy",l).then(function(t){s.close(),a.$message.success("清除成功")})},fanxian100:function(t,e,a){var s=this,l=c.Loading.service({fullscreen:!0}),n={id:t._id,fanxian100:a,tp:"fanxian100"};i.a.post("http://localhost:8090/proxy",n).then(function(t){i.a.post("http://localhost:8090/stores",{q:s.q,currentPage:s.currentPage,pageSize:s.pageSize}).then(function(t){console.log(t.data),s.stores=t.data.data,s.currentPage=t.data.currentPage,s.pageSize=t.data.pageSize,s.totalCount=t.data.totalCount,l.close()})})},canUseBalance:function(t,e,a){var s=this,l=c.Loading.service({fullscreen:!0}),n={id:t._id,canUseBalance:a,tp:"canusebalance"};i.a.post("http://localhost:8090/proxy",n).then(function(t){i.a.post("http://localhost:8090/stores",{q:s.q,currentPage:s.currentPage,pageSize:s.pageSize}).then(function(t){console.log(t.data),s.stores=t.data.data,s.currentPage=t.data.currentPage,s.pageSize=t.data.pageSize,s.totalCount=t.data.totalCount,l.close()})})},rake:function(t,e,a){var s=this,l=c.Loading.service({fullscreen:!0}),n={id:t._id,norake:a,tp:"rake"};i.a.post("http://localhost:8090/proxy",n).then(function(t){l.close(),s.afterRake()})},afterRake:function(){var t=this,e=c.Loading.service();i.a.post("http://localhost:8090/stores",{q:this.q,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){t.stores=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})},handleSizeChange:function(t){var e=this;this.pageSize=t,this.currentPage=1,i.a.post("http://localhost:8090/stores",{q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.stores=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount})},handleCurrentChange:function(t){var e=this;this.currentPage=t,i.a.post("http://localhost:8090/stores",{q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.stores=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount})},allQRcode:function(){this.$router.push({name:"qrcodes",params:{stores:this.stores}})},handleClick:function(t){this.$router.push({name:"pubstores",params:{_id:t._id}})},handleHardDelete:function(t,e){var a=this,s=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/storedelete",{tp:"storedeletehard",_id:t._id}).then(function(t){200==t.status?(a.$message.success("删除成功"),a.stores.splice(e,1)):a.$message.error("删除失败"),s.close()})},handleDelete:function(t,e){var a=this;i.a.post("http://localhost:8090/storedelete",{tp:"storedelete",_id:t._id,deleted:1}).then(function(t){200==t.status?(a.$message.success("隐藏成功"),a.stores[e].deleted=1):a.$message.error("隐藏失败")})},handleUnDelete:function(t,e){var a=this;i.a.post("http://localhost:8090/storedelete",{tp:"storedelete",_id:t._id,deleted:0}).then(function(t){200==t.status?(a.$message.success("显示成功"),a.stores[e].deleted=0):a.$message.error("显示失败")})},search:function(){var t=this;i.a.post("http://localhost:8090/stores",{q:this.q,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){t.stores=e.data.data})},showQRCode:function(t){var e=this;this.innerVisible=!0,this.qrcode=t._id,this.$nextTick(function(){e.createQrcode()})},createQrcode:function(){this.qr=new x.a("qrcode",{width:150,height:150,text:this.qrcode})},closeCode:function(){this.$refs.qrcode.innerHTML=""}},mounted:function(){var t=this;i.a.post("http://localhost:8090/stores",{q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){console.log(e.data),t.stores=e.data.data,t.currentPage=e.data.currentPage,t.pageSize=e.data.pageSize,t.totalCount=e.data.totalCount})}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"搜索商家",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{on:{click:t.allQRcode}},[t._v("统一生成二维码")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("span",[t._v("本页条数："+t._s(t.stores.length))])])],1),t._v(" "),a("el-dialog",{attrs:{width:"30%",visible:t.innerVisible,"append-to-body":""},on:{close:t.closeCode,"update:visible":function(e){t.innerVisible=e}}},[a("div",{staticClass:"qrcode"},[a("div",{ref:"qrcode",attrs:{id:"qrcode"}})])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stores}},[a("el-table-column",{attrs:{prop:"merchantName",label:"商家姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantPhone",label:"联系方式",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"余额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("rounding")(e.row.balance))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"canUseBalance",label:"是否可用余额支付"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.canUseBalance||void 0===e.row.canUseBalance?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("可用")]):t._e(),t._v(" "),!1===e.row.canUseBalance?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("不可用")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fanxian100",label:"是否参与返现100%活动"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fanxian100?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已参与")]):t._e(),t._v(" "),e.row.fanxian100?t._e():a("span",{staticStyle:{"margin-left":"10px"}},[t._v("不参与")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deleted",label:"是否显示"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.deleted?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已隐藏")]):t._e(),t._v(" "),0===e.row.deleted?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("正常显示")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"norake",label:"平台参与抽成"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.norake?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("不参与")]):t._e(),t._v(" "),e.row.norake?t._e():a("span",{staticStyle:{"margin-left":"10px"}},[t._v("参与")])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row,e.$index)}}},[t._v("隐藏")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleUnDelete(e.row,e.$index)}}},[t._v("显示")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showQRCode(e.row)}}},[t._v("查看二维码")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleHardDelete(e.row,e.$index)}}},[t._v("硬删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.rake(e.row,e.$index,0)}}},[t._v("参与抽成")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.rake(e.row,e.$index,1)}}},[t._v("不参与抽成")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.logout(e.row,e.$index)}}},[t._v("清除登录状态")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.canUseBalance(e.row,e.$index,0)}}},[t._v("禁用余额支付")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.canUseBalance(e.row,e.$index,1)}}},[t._v("启用余额支付")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.fanxian100(e.row,e.$index,0)}}},[t._v("退出返现100%活动")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.fanxian100(e.row,e.$index,1)}}},[t._v("参与返现100%活动")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var S=a("C7Lr")(w,k,!1,function(t){a("yFaV")},null,null).exports,C=a("zH3I"),z=a.n(C),P={data:function(){return{dialogFormVisible:!1,balance:0,users:[],q:"",currentPage:1,pageSize:10,totalCount:0,currentUserId:"",currentIndex:-1}},methods:{addBalance:function(t,e){this.dialogFormVisible=!0,this.currentUserId=t._id,this.currentIndex=e},doAddBalance:function(){var t=this,e=100*this.balance,a=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"updateuserbalance",id:this.currentUserId,balance:e}).then(function(s){console.log(s),t.users[t.currentIndex].data.balance=e,t.balance=0,t.currentIndex=-1,t.currentUserId="",t.dialogFormVisible=!1,a.close()})},handleSizeChange:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.pageSize=t,this.currentPage=1,i.a.post("http://localhost:8090/proxy",{tp:"userlist",q:this.q,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.users=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},handleCurrentChange:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.currentPage=t,i.a.post("http://localhost:8090/proxy",{tp:"userlist",q:this.q,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.users=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},search:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"userlist",q:this.q,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.users=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})},createAtDateFormater:function(t,e){var a=t[e.property];return 0==a?"":z()(a).format("YYYY-MM-DD")},dateFormater:function(t,e){var a=t.data[e.property];return 0==a?"未签到":z()(a).format("YYYY-MM-DD")},handleClick:function(t,e){var a=this;this.$prompt("输入数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var l=s.value;switch(e){case 1:return l>1?void a.$message({type:"error",message:"一次只能发放一个"}):(t.tp=2,void i.a.post("http://localhost:8090/addcoupon",t).then(function(t){console.log(t),200==t.status?a.$message.success("成功"):a.$message.error("失败")}));case 2:t.data.exp+=parseInt(l);break;case 3:t.data.signs+=parseInt(l),t.data.sevenSigns+=parseInt(l),t.data.signDate=Date.parse(new Date);break;case 4:t.data.point+=parseInt(l);break;case 5:t.createdAt=t.createdAt-864e5*l;break;case 6:t.data.signDate=t.data.signDate-864e5*l}i.a.post("http://localhost:8090/updateuser",t).then(function(t){console.log(t),200==t.status?a.$message.success("成功"):a.$message.error("失败")})}).catch(function(){a.$message({type:"info",message:"取消输入"})})}},mounted:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"userlist",q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.users=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"输入昵称",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{on:{click:t.search}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.users,border:""}},[a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.name",label:"昵称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.balance",label:"余额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.data.balance/100)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"data.exp",label:"经验",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.point",label:"积分",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.exp",label:"等级",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.phone",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.sevenSigns",label:"签到",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdAt",label:"注册日期",width:"150",formatter:t.createAtDateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"signDate",label:"签到日期",width:"150",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.addBalance(e.row,e.$index)}}},[t._v("修改余额")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,1)}}},[t._v("发放优惠券")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,2)}}},[t._v("发放经验")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,4)}}},[t._v("发放积分")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"修改余额",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("余额：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入余额",clearable:""},model:{value:t.balance,callback:function(e){t.balance=e},expression:"balance"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doAddBalance()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var I=a("C7Lr")(P,$,!1,function(t){a("/OMQ")},null,null).exports,j={data:function(){return{q:"",lottoryTime:"",stores:[],events:[],dialogFormVisible:!1,event:{stores:[]},detailImage:[],type:1,links:[{value:"1",label:"快闪店"},{value:"2",label:"抽奖"},{value:"3",label:"邀请"}],deletedIds:[]}},methods:{clearDialog:function(t){console.log(t),this.event={stores:[]},this.deletedIds=[]},handleRemove:function(t,e){this.event.stores.splice(e,1),this.deletedIds.push(t._id)},handleClick:function(t){this.event.stores||(this.event.stores=[]),console.log(t),this.event.stores.push(t)},search:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/stores",{q:this.q,currentPage:1,pageSize:5}).then(function(a){t.stores=a.data.data,e.close()})},addEvent:function(){this.dialogFormVisible=!0,this.type=1},doAddEvent:function(t){var e=this;if(this.event.title)if(this.event.index)if(this.event.image)if(0!=this.detailImage.length||0!=this.event.detailImage.length)if(this.event.btnText)if(this.event.type)if("1"!=this.event.type||this.event.stores){if("2"==this.event.type){if(!this.event.lottoryTime)return void this.$message.error("请设置开奖时间");if(!this.event.lottory1Count||!this.event.lottory2Count||!this.event.lottory3Count)return void this.$message.error("请输入各奖项人数");if(!this.event.lottory1||!this.event.lottory2||!this.event.lottory3)return void this.$message.error("请设置各奖项奖品")}var a=c.Loading.service({fullscreen:!0});1==t?(this.event.tp="eventadd",this.event.detailImage=this.detailImage,i.a.post("http://localhost:8090/eventadd",this.event).then(function(t){200==t.status?(e.$message.success("添加成功"),e.event._id=t.data._id,e.events.push(e.event),e.event={}):e.$message.error("添加失败"),e.dialogFormVisible=!1})):2==t&&(this.event.tp="eventupdate",this.event.dids=this.deletedIds,this.detailImage.length>0&&(this.event.detailImage=this.detailImage),i.a.post("http://localhost:8090/eventupdate",this.event).then(function(t){200==t.status?e.$message.success("更新成功"):e.$message.error("更新失败"),e.dialogFormVisible=!1})),this.detailImage=[],a.close()}else this.$message.error("请选择活动商家");else this.$message.error("请选择活动类型");else this.$message.error("请输入按钮文字");else this.$message.error("请上传详情图片");else this.$message.error("请上传活动图片");else this.$message.error("请填写轮播位置");else this.$message.error("请输入活动名称")},handleDelete:function(t){var e=this,a=this.events[t];a.tp="eventdelete",i.a.post("http://localhost:8090/eventdelete",a).then(function(a){200==a.status?(e.events.splice(t,1),e.$message.success("删除成功")):e.$message.error("删除失败")})},handleEdit:function(t){this.event=this.events[t],this.type=2,this.dialogFormVisible=!0},onDetailUploadSuccess:function(t){this.detailImage.push(t)},onItemUploadSuccess:function(t){this.event.image=t},submitUpload:function(t){1==t?this.$refs.item.submit():2==t&&this.$refs.itemDetail.submit()}},mounted:function(){var t=this;i.a.get("http://localhost:8090/events").then(function(e){console.log(e),t.events=e.data.data}),i.a.post("http://localhost:8090/stores",{q:"",currentPage:1,pageSize:5}).then(function(e){console.log(e.data),t.stores=e.data.data})}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.events}},[a("el-table-column",{attrs:{prop:"title",label:"活动名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"文案",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"btnText",label:"按钮文字",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"活动类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.type?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("快闪店")]):t._e(),t._v(" "),"2"===e.row.type?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("抽奖")]):t._e(),t._v(" "),"3"===e.row.type?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("邀请")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"index",label:"位置"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加活动",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.clearDialog}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("活动名称：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入活动名称",clearable:""},model:{value:t.event.title,callback:function(e){t.$set(t.event,"title",e)},expression:"event.title"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("活动文案：")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"可选",type:"textarea",clearable:""},model:{value:t.event.desc,callback:function(e){t.$set(t.event,"desc",e)},expression:"event.desc"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("位置：")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入位置",clearable:""},model:{value:t.event.index,callback:function(e){t.$set(t.event,"index",e)},expression:"event.index"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("轮播图片：")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"item",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onItemUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("详情图片：")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"itemDetail",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:"true","on-success":t.onDetailUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(2)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("按钮文字：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"详情页按钮文字",clearable:""},model:{value:t.event.btnText,callback:function(e){t.$set(t.event,"btnText",e)},expression:"event.btnText"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("活动类型：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{filterable:"",placeholder:"活动类型"},model:{value:t.event.type,callback:function(e){t.$set(t.event,"type",e)},expression:"event.type"}},t._l(t.links,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("span",[t._v("已添加的商家")])])],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.event.stores}},[a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleRemove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"搜索商家",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stores}},[a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("添加")])]}}])})],1)],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("开奖时间：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.event.lottoryTime,callback:function(e){t.$set(t.event,"lottoryTime",e)},expression:"event.lottoryTime"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("一等奖人数：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"人数",clearable:""},model:{value:t.event.lottory1Count,callback:function(e){t.$set(t.event,"lottory1Count",e)},expression:"event.lottory1Count"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("二等奖人数：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"人数",clearable:""},model:{value:t.event.lottory2Count,callback:function(e){t.$set(t.event,"lottory2Count",e)},expression:"event.lottory2Count"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("三等奖人数：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"人数",clearable:""},model:{value:t.event.lottory3Count,callback:function(e){t.$set(t.event,"lottory3Count",e)},expression:"event.lottory3Count"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("一等奖：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"如: 现金100元",clearable:""},model:{value:t.event.lottory1,callback:function(e){t.$set(t.event,"lottory1",e)},expression:"event.lottory1"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("二等奖：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"如: 现金50元",clearable:""},model:{value:t.event.lottory2,callback:function(e){t.$set(t.event,"lottory2",e)},expression:"event.lottory2"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("三等奖：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"如: 现金20元",clearable:""},model:{value:t.event.lottory3,callback:function(e){t.$set(t.event,"lottory3",e)},expression:"event.lottory3"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doAddEvent(t.type)}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addEvent}},[t._v("添加活动")])],1)},staticRenderFns:[]};var q=a("C7Lr")(j,F,!1,function(t){a("IsXw")},null,null).exports,L={data:function(){return{activeName:"1",financialsummary:{},currentPage:1,pageSize:10,totalCount:0,financialinouthis:[],couponhis:[],subsidyhis:[]}},filters:{rounding:function(t){return t.toFixed(2)}},methods:{handleCurrentChangeInout:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.currentPage=t,i.a.post("http://localhost:8090/proxy",{tp:"financialinouthis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.financialinouthis=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},handleCurrentChangeCoupon:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.currentPage=t,i.a.post("http://localhost:8090/proxy",{tp:"couponhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.couponhis=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},handleCurrentChangeSubsidy:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.currentPage=t,i.a.post("http://localhost:8090/proxy",{tp:"subsidyhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.subsidyhis=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},handleClick:function(){var t=this;this.currentPage=1;var e=c.Loading.service({fullscreen:!0});switch(this.activeName){case"1":i.a.post("http://localhost:8090/proxy",{tp:"financialsummary"}).then(function(a){t.financialsummary=a.data,console.log(a.data),e.close()});break;case"2":i.a.post("http://localhost:8090/proxy",{tp:"financialinouthis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.financialinouthis=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()});break;case"3":i.a.post("http://localhost:8090/proxy",{tp:"couponhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.couponhis=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()});break;case"4":i.a.post("http://localhost:8090/proxy",{tp:"subsidyhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.subsidyhis=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})}},dateFormater:function(t,e){var a=t[e.property];return 0==a?"":z()(a).format("YYYY-MM-DD")}},mounted:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"financialsummary"}).then(function(a){t.financialsummary=a.data,console.log(a.data),e.close()})}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总",name:"1"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("收支")]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"start"}},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"success"}},[t._v("本月收入："+t._s(t.financialsummary.m.in)+" 元")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"danger"}},[t._v("本月支出："+t._s(t.financialsummary.m.out)+" 元")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"success"}},[t._v("今日收入："+t._s(t.financialsummary.d.in)+" 元")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"danger"}},[t._v("今日支出："+t._s(t.financialsummary.d.out)+" 元")])],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("订单")]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"start"}},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"success"}},[t._v("本月订单数："+t._s(t.financialsummary.m.orders))])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"success"}},[t._v("今日订单数："+t._s(t.financialsummary.d.orders))])],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("用户")]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"start"}},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"success"}},[t._v("本月新增用户数："+t._s(t.financialsummary.m.users)+" 个")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:"success"}},[t._v("今日新增用户数："+t._s(t.financialsummary.d.users)+" 个")])],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("优惠券")]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"start"}},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("本月优惠券使用："+t._s(t.financialsummary.m.coupon)+" 元")])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("今日优惠券使用："+t._s(t.financialsummary.d.coupon)+" 元")])],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("赏金令")]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"start"}},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("本月商家补贴："+t._s(t.financialsummary.m.subsidy)+" 元")])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("今日商家补贴："+t._s(t.financialsummary.d.subsidy)+" 元")])],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"收支历史",name:"2"}},[a("el-table",{attrs:{data:t.financialinouthis}},[a("el-table-column",{attrs:{prop:"_id",label:"日期",width:"180",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"in",label:"收入",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("rounding")(e.row.in))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"out",label:"支出",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("rounding")(e.row.out))+"\n          ")]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChangeInout}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"优惠券记录",name:"3"}},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.couponhis}},[a("el-table-column",{attrs:{prop:"timestamp",label:"日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"coupon",label:"优惠券面额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"使用门店",width:"280"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChangeCoupon}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"补贴记录",name:"4"}},[a("el-table",{staticStyle:{width:"90%"},attrs:{data:t.subsidyhis}},[a("el-table-column",{attrs:{prop:"timestamp",label:"日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"商家门店",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"新用户名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subsidy",label:"补贴金额",width:"00"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChangeSubsidy}})],1)],1)],1)},staticRenderFns:[]};var D=a("C7Lr")(L,V,!1,function(t){a("XfZX")},null,null).exports,T={data:function(){return{q:"",dialogFormVisible:!1,withdraws:[],histories:[],status:0,realWithdrawAmount:0,currentId:"",month:0,day:0,currentPage:1,pageSize:10,totalCount:0,statuslist:[{value:0,label:"待审核"},{value:1,label:"审核中"},{value:2,label:"付款中"},{value:3,label:"已付款"}]}},methods:{dateFormater:function(t,e){var a=t[e.property];return 0==a?"":z()(a).format("YYYY-MM-DD")},handleSizeChange:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.pageSize=t,this.currentPage=1,i.a.post("http://localhost:8090/proxy",{q:this.q,tp:"withdrawhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.histories=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},handleCurrentChange:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.currentPage=t,i.a.post("http://localhost:8090/proxy",{q:this.q,tp:"withdrawhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.histories=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},search:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{q:this.q,tp:"withdrawhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.histories=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})},handleClick:function(t){this.currentId=t._id,this.dialogFormVisible=!0},doUpdate:function(){var t=this,e={tp:"withdrawupdate",_id:this.currentId,status:this.status,realAmount:this.realWithdrawAmount};3!=this.status||this.realWithdrawAmount?i.a.post("http://localhost:8090/proxy",e).then(function(e){200==e.status?(t.$message.success("更新成功"),t.currentId="",t.dialogFormVisible=!1,t.$router.go(0)):t.$message.error("更新失败")}):this.$message.error("请输入实际打款金额")}},mounted:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"withdraws"}).then(function(e){t.withdraws=e.data.reqs,t.month=e.data.month,t.day=e.data.day}),i.a.post("http://localhost:8090/proxy",{tp:"withdrawhis",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.histories=a.data.data,t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",[t._v("本月提现："+t._s(t.month))])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",[t._v("今日提现："+t._s(t.day))])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("div",[t._v("提现申请")])])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.withdraws,border:""}},[a("el-table-column",{attrs:{prop:"publishedAt",label:"申请日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"提现商家",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"商家姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankCard",label:"收款账户",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank",label:"开户行",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"提现金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"当前状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("审核中")]):t._e(),t._v(" "),2===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("付款中")]):t._e(),t._v(" "),3===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已付款")]):t._e(),t._v(" "),4===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已撤销")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("更新状态")])]}}])})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("div",[t._v("提现历史")])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"输入商家姓名",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{on:{click:t.search}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.histories,border:"","show-summary":""}},[a("el-table-column",{attrs:{prop:"publishedAt",label:"申请日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"提现商家",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"商家姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankCard",label:"收款账户",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank",label:"开户行",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"提现金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"当前状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("审核中")]):t._e(),t._v(" "),2===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("付款中")]):t._e(),t._v(" "),3===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已付款")]):t._e(),t._v(" "),4===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已撤销")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,1)}}},[t._v("更新状态")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"新增板块",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("更新状态到：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{filterable:"",placeholder:"跳转连接"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statuslist,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("实际付款金额：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"最后状态需要填写",clearable:""},model:{value:t.realWithdrawAmount,callback:function(e){t.realWithdrawAmount=e},expression:"realWithdrawAmount"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doUpdate}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var U=a("C7Lr")(T,N,!1,function(t){a("du8E")},null,null).exports,A={data:function(){return{image:"",phone:"",fanxian:{}}},methods:{checkLottory:function(){var t=this;if(this.phone){var e={tp:"checklottory",phone:this.phone},a=c.Loading.service({fullscreen:!0,text:"审核中..."});i.a.post("http://localhost:8090/proxy",e).then(function(e){if(a.close(),200==e.status){if(-1==e.data)return void t.$message.error("用户不存在");t.$message.success("通过审核")}else t.$message.error("审核失败")})}else this.$message.error("请输入手机号")},updateFanxian:function(){var t=this,e=c.Loading.service({fullscreen:!0,text:"更新中..."}),a=this.fanxian;a.tp="fanxian",i.a.post("http://localhost:8090/proxy",a).then(function(a){200==a.status?t.$message.success("更新成功"):t.$message.error("更新失败"),e.close()})},update:function(){var t=this;if(this.image){var e={tp:"homeheader",image:this.image};i.a.post("http://localhost:8090/proxy",e).then(function(e){200==e.status?t.$message.success("更新成功"):t.$message.error("更新失败")})}else this.$message.error("请上传图片")},onItemUploadSuccess:function(t){this.image=t},submitUpload:function(t){1==t?this.$refs.item.submit():2==t&&this.$refs.itemDetail.submit()}},mounted:function(){var t=this;i.a.post("http://localhost:8090/proxy",{tp:"fanxianconfig"}).then(function(e){200==e.status&&(console.log(e.data),t.fanxian=e.data.data)})}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("Home背景图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"item",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onItemUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{width:"100%"},on:{click:t.update}},[t._v("更新")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:12}},[t._v("抽奖资格审核")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"输入手机号,然后回车",clearable:""},on:{change:t.checkLottory},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{width:"100%"},on:{click:t.checkLottory}},[t._v("审核")])],1)],1),t._v(" "),a("el-divider"),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("返现配置")]),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:3}},[t._v("\n      最高返现： \n    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"最高返现(元)",clearable:""},model:{value:t.fanxian.maxFanxian,callback:function(e){t.$set(t.fanxian,"maxFanxian",t._n(e))},expression:"fanxian.maxFanxian"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:3}},[t._v("\n      首次返现百分比： \n    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"如：40",clearable:""},model:{value:t.fanxian.firstFanxianPercent,callback:function(e){t.$set(t.fanxian,"firstFanxianPercent",t._n(e))},expression:"fanxian.firstFanxianPercent"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:3}},[t._v("\n      二次返现百分比： \n    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"如：30",clearable:""},model:{value:t.fanxian.secondFanxianPercent,callback:function(e){t.$set(t.fanxian,"secondFanxianPercent",t._n(e))},expression:"fanxian.secondFanxianPercent"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:3}},[t._v("\n      三次返现百分比： \n    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"如：20",clearable:""},model:{value:t.fanxian.thirdFanxianPercent,callback:function(e){t.$set(t.fanxian,"thirdFanxianPercent",t._n(e))},expression:"fanxian.thirdFanxianPercent"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:t.updateFanxian}},[t._v("提交")])],1)],1),t._v(" "),a("el-divider")],1)},staticRenderFns:[]};var Y=a("C7Lr")(A,E,!1,function(t){a("90tG")},null,null).exports,M={name:"qrcodes",data:function(){return{stores:this.$route.params.stores}},methods:{downloadImage:function(t){var e=document.getElementById(this.stores[t]._id).getElementsByTagName("canvas"),a=document.createElement("a");a.href=e[0].toDataURL("image/png"),this.stores[t].storeName?a.download=z()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t].storeName:a.download=z()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t]._id,a.click()},downloadAll:function(){for(var t=0;t<this.stores.length;t++){var e=document.getElementById(this.stores[t]._id).getElementsByTagName("canvas"),a=document.createElement("a");a.href=e[0].toDataURL("image/png"),this.stores[t].storeName?a.download=z()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t].storeName:a.download=z()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t]._id,a.click()}}},mounted:function(){for(var t=0;t<this.stores.length;t++)new x.a(this.stores[t]._id,{width:150,height:150,text:this.stores[t]._id})}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{on:{click:t.downloadAll}},[t._v("一键下载")]),t._v(" "),a("div",{staticClass:"qrcode"},t._l(t.stores,function(e,s){return a("div",{staticClass:"qrcodeItem"},[a("div",{ref:e._id,refInFor:!0,attrs:{id:e._id}}),t._v(" "),a("div",[a("span",[t._v(t._s(s)+"-")]),t._v(" "),a("span",[t._v(t._s(e.storeName))]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downloadImage(s)}}},[t._v("下载")])],1)])}),0)],1)},staticRenderFns:[]};var B=a("C7Lr")(M,R,!1,function(t){a("nvE0")},null,null).exports,H=a("0lu6"),G=a.n(H),Q={data:function(){return{q:"",stores:[],groups:[],dialogFormVisible:!1,group:{stores:[]},removes:[],type:1}},methods:{clearDialog:function(t){this.group={stores:[]},this.removes=[]},handleRemove:function(t,e){this.group.stores.splice(e,1),this.removes.push(t)},handleClick:function(t){this.group.stores||(this.group.stores=[]),console.log(t),this.group.stores.push(t)},search:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/stores",{q:this.q,currentPage:1,pageSize:5}).then(function(a){t.stores=a.data.data,e.close()})},addEvent:function(){this.dialogFormVisible=!0,this.type=1},doAddEvent:function(t){var e=this;if(this.group.title)if(this.group.discount){var a=c.Loading.service({fullscreen:!0});1==t?(this.group.tp="groupadd",this.group._id=G()(),this.group.enabled=1,i.a.post("http://localhost:8090/proxy",this.group).then(function(t){200==t.status?(e.$message.success("添加成功"),e.groups.push(e.group),e.group={}):e.$message.error("添加失败"),e.dialogFormVisible=!1})):2==t&&(this.group.tp="groupupdate",this.group.removes=this.removes,i.a.post("http://localhost:8090/proxy",this.group).then(function(t){200==t.status?e.$message.success("更新成功"):e.$message.error("更新失败"),e.dialogFormVisible=!1})),a.close()}else this.$message.error("请输入分组折扣");else this.$message.error("请输入分组名称")},handleDelete:function(t){var e=this,a=this.groups[t];a.tp="groupdelete",i.a.post("http://localhost:8090/proxy",a).then(function(a){200==a.status?(e.groups.splice(t,1),e.$message.success("删除成功")):e.$message.error("删除失败")})},handleEdit:function(t){this.group=this.groups[t],this.type=2,this.dialogFormVisible=!0},handleDisable:function(t){var e=this,a={tp:"groupdisable",id:this.groups[t]._id},s=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",a).then(function(a){200==a.status?(e.groups[t].enabled=0,e.$message.success("禁用成功")):e.$message.error("禁用失败"),s.close()})},handleEnable:function(t){var e=this,a={tp:"groupenable",id:this.groups[t]._id},s=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",a).then(function(a){200==a.status?(e.groups[t].enabled=1,e.$message.success("启用成功")):e.$message.error("启用失败"),s.close()})}},mounted:function(){var t=this;i.a.post("http://localhost:8090/proxy",{tp:"groups"}).then(function(e){console.log(e),t.groups=e.data.data}),i.a.post("http://localhost:8090/stores",{q:"",currentPage:1,pageSize:5}).then(function(e){console.log(e.data),t.stores=e.data.data})}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.groups}},[a("el-table-column",{attrs:{prop:"title",label:"名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"折扣",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"已启用",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.$index)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDisable(e.$index)}}},[t._v("禁用")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEnable(e.$index)}}},[t._v("启用")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加分组",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.clearDialog}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("分组名称：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入分组名称",clearable:""},model:{value:t.group.title,callback:function(e){t.$set(t.group,"title",e)},expression:"group.title"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("分组折扣：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入分组折扣",clearable:""},model:{value:t.group.discount,callback:function(e){t.$set(t.group,"discount",e)},expression:"group.discount"}})],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"center"}},[t._v("已添加的商家")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.group.stores}},[a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"原折扣"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleRemove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"center"}},[t._v("商家列表")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"搜索商家",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stores}},[a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"折扣"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("添加")])]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doAddEvent(t.type)}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addEvent}},[t._v("添加分组")])],1)},staticRenderFns:[]};var O=a("C7Lr")(Q,W,!1,function(t){a("sTLi")},null,null).exports,X={data:function(){return{timerange:"",q:"",orders:[],currentPage:1,pageSize:10,totalCount:0,loading:!1,stores:[],storeIndex:"搜索商家"}},methods:{handleSizeChange:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.pageSize=t,this.currentPage=1;var s={tp:"orders",q:this.q,currentPage:this.currentPage,pageSize:this.pageSize};"搜索商家"!=this.storeIndex&&(s.storeId=this.stores[this.storeIndex]._id),this.timerange.length>1&&(s.startTime=new Date(this.timerange[0]).getTime(),s.endTime=new Date(this.timerange[1]).getTime()),i.a.post("http://localhost:8090/proxy",s).then(function(t){console.log(t.data),e.setOrders(t.data.data),e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},handleCurrentChange:function(t){var e=this,a=c.Loading.service({fullscreen:!0});this.currentPage=t;var s={tp:"orders",q:this.q,currentPage:this.currentPage,pageSize:this.pageSize};"搜索商家"!=this.storeIndex&&(s.storeId=this.stores[this.storeIndex]._id),this.timerange.length>1&&(s.startTime=new Date(this.timerange[0]).getTime(),s.endTime=new Date(this.timerange[1]).getTime()),i.a.post("http://localhost:8090/proxy",s).then(function(t){console.log(t.data),e.setOrders(t.data.data),e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount,a.close()})},storeSearch:function(t){var e=this;this.loading=!0,i.a.post("http://localhost:8090/stores",{q:t,currentPage:1,pageSize:20}).then(function(t){e.stores=t.data.data,e.loading=!1})},clear:function(){this.storeIndex="搜索商家",this.timerange=[],this.q=""},search:function(){var t=this,e=c.Loading.service({fullscreen:!0}),a={tp:"orders",q:this.q,currentPage:this.currentPage,pageSize:this.pageSize};"搜索商家"!=this.storeIndex&&(a.storeId=this.stores[this.storeIndex]._id),this.timerange.length>1&&(a.startTime=new Date(this.timerange[0]).getTime(),a.endTime=new Date(this.timerange[1]).getTime()),i.a.post("http://localhost:8090/proxy",a).then(function(a){console.log(a.data),t.setOrders(a.data.data),t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})},dateFormater:function(t,e){var a=t[e.property];return z()(a).format("YYYY-MM-DD HH:mm:ss")},setOrders:function(t){for(var e=0;e<t.length;e++)t[e].merchantIncome=(t[e].totalAmount+t[e].subsidy-t[e].income7).toFixed(2);this.orders=t}},mounted:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"orders",q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(a){console.log(a.data),t.setOrders(a.data.data),t.currentPage=a.data.currentPage,t.pageSize=a.data.pageSize,t.totalCount=a.data.totalCount,e.close()})}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{filterable:"",remote:"","remote-method":t.storeSearch,loading:t.loading,placeholder:"选择商家"},model:{value:t.storeIndex,callback:function(e){t.storeIndex=e},expression:"storeIndex"}},t._l(t.stores,function(t,e){return a("el-option",{key:t._id,attrs:{label:t.storeName,value:e}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:"8"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timerange,callback:function(e){t.timerange=e},expression:"timerange"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"用户名",clearable:""},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{on:{click:t.search}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{on:{click:t.clear}},[t._v("重置")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orders,border:"",stripe:"","show-summary":""}},[a("el-table-column",{attrs:{prop:"storeName",label:"商家",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"realCoupon",label:"优惠券",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"finalAmount",label:"用户实付",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalAmount",label:"订单金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subsidy",label:"赏金令",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"income7",label:"平台收入",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantIncome",label:"商家收入",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"timestamp",label:"下单时间",width:"180",formatter:t.dateFormater}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var K=a("C7Lr")(X,Z,!1,function(t){a("QLJG")},null,null).exports,J={data:function(){return{coupon:{},rule:{},q:"",dialogFormVisible:!1,dialogFormVisible1:!1,coupons:[],rules:[],typeList:[{value:"register",label:"新用户注册"},{value:"consumption",label:"用户消费"}]}},methods:{dateFormater:function(t,e){var a=t[e.property];return 0==a?"":z()(a).format("YYYY-MM-DD")},handleClick:function(t,e){var a=this,s=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{id:t._id,tp:"coupondicdelete"}).then(function(t){s.close(),a.coupons.splice(e,1)})},handleClick1:function(t,e){var a=this,s=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{id:t._id,tp:"couponruledelete"}).then(function(t){s.close(),a.rules.splice(e,1)})},addRule:function(){this.dialogFormVisible1=!0},doAddRule:function(){var t=this;if(this.rule.type)if(this.rule.threshold)if(this.rule.code){var e=c.Loading.service({fullscreen:!0});this.rule.tp="couponruleadd",i.a.post("http://localhost:8090/proxy",this.rule).then(function(a){console.log(a.data),t.dialogFormVisible1=!1,i.a.post("http://localhost:8090/proxy",{tp:"couponrules"}).then(function(e){t.rules=e.data.data}),e.close()})}else this.$message.error("请输入发放编码");else this.$message.error("请输入消费阈值");else this.$message.error("请选择类型")},addCoupon:function(){this.dialogFormVisible=!0},doAddCoupon:function(){var t=this;if(this.coupon.code)if(this.coupon.desc)if(this.coupon.value)if(this.coupon.man)if(this.coupon.vpday){var e=c.Loading.service({fullscreen:!0});this.coupon.tp="coupondicadd",i.a.post("http://localhost:8090/proxy",this.coupon).then(function(a){i.a.post("http://localhost:8090/proxy",{tp:"coupondic"}).then(function(e){console.log(e.data),t.coupons=e.data.data}),e.close(),t.dialogFormVisible=!1})}else this.$message.error("请输入有效期");else this.$message.error("请输入使用门槛");else this.$message.error("请输入面额");else this.$message.error("请输入描述");else this.$message.error("请输入编码")}},mounted:function(){var t=this,e=c.Loading.service({fullscreen:!0});i.a.post("http://localhost:8090/proxy",{tp:"coupondic"}).then(function(e){console.log(e.data),t.coupons=e.data.data}),i.a.post("http://localhost:8090/proxy",{tp:"couponrules"}).then(function(a){console.log(a.data),t.rules=a.data.data,e.close()})}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-divider",{attrs:{"content-position":"left"}},[t._v("优惠券")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.coupons,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"编码",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"value",label:"面额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.value/100)+"元\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"man",label:"满多少可用",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.man/100)+"元\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"vpday",label:"有效期",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.vpday)+"天\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addCoupon}},[t._v("新建优惠券")]),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("发放规则")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.rules,border:""}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return["register"==e.row.type?a("span",[t._v("新用户注册")]):t._e(),t._v(" "),"consumption"==e.row.type?a("span",[t._v("用户消费")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"threshold",label:"消费阈值",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.threshold/100)+"元\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"发放编码",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick1(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addRule}},[t._v("添加规则")]),t._v(" "),a("el-dialog",{attrs:{title:"添加优惠券",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("编码：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入优惠券编码",clearable:""},model:{value:t.coupon.code,callback:function(e){t.$set(t.coupon,"code",e)},expression:"coupon.code"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("描述：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入描述",clearable:""},model:{value:t.coupon.desc,callback:function(e){t.$set(t.coupon,"desc",e)},expression:"coupon.desc"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("面额：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入面额",clearable:""},model:{value:t.coupon.value,callback:function(e){t.$set(t.coupon,"value",e)},expression:"coupon.value"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("使用门槛：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入使用门槛",clearable:""},model:{value:t.coupon.man,callback:function(e){t.$set(t.coupon,"man",e)},expression:"coupon.man"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title"},[t._v("有效期(单位：天)：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入有效期(天)",clearable:""},model:{value:t.coupon.vpday,callback:function(e){t.$set(t.coupon,"vpday",e)},expression:"coupon.vpday"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doAddCoupon()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加规则",visible:t.dialogFormVisible1},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("类型：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{filterable:"",placeholder:"规则类型"},model:{value:t.rule.type,callback:function(e){t.$set(t.rule,"type",e)},expression:"rule.type"}},t._l(t.typeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("消费阈值：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入阈值",clearable:""},model:{value:t.rule.threshold,callback:function(e){t.$set(t.rule,"threshold",e)},expression:"rule.threshold"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("发放编码：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入发放编码",clearable:""},model:{value:t.rule.code,callback:function(e){t.$set(t.rule,"code",e)},expression:"rule.code"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doAddRule()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var et=a("C7Lr")(J,tt,!1,function(t){a("nTKa")},null,null).exports;s.default.use(o.a);var at=new o.a({routes:[{path:"/components/plates",name:"plates",component:h},{path:"/components/coupons",name:"coupons",component:g},{path:"/components/pubstores",name:"pubstores",component:_},{path:"/components/stores",name:"stores",component:S},{path:"/components/users",name:"users",component:I},{path:"/components/events",name:"events",component:q},{path:"/components/finance",name:"finance",component:D},{path:"/components/withdraws",name:"withdraws",component:U},{path:"/components/others",name:"others",component:Y},{path:"/components/qrcodes",name:"qrcodes",component:B},{path:"/components/orders",name:"orders",component:K},{path:"/components/storegroups",name:"storegroups",component:O},{path:"/components/couponrules",name:"rules",component:et}]}),st=a("Ginn"),lt=a.n(st);a("b6Kr");s.default.use(u.a),s.default.use(lt.a,{ak:"ovhQnjcwKnMYLlBo2eMBzPAb"}),s.default.config.productionTip=!1,new s.default({el:"#app",router:at,components:{App:n},template:"<App/>"})},QLJG:function(t,e){},XfZX:function(t,e){},b6Kr:function(t,e){},du8E:function(t,e){},nTKa:function(t,e){},nvE0:function(t,e){},qWqI:function(t,e){},qmLA:function(t,e){},sTLi:function(t,e){},tbm1:function(t,e){},yFaV:function(t,e){},zenm:function(t,e,a){var s={"./af":"DMd3","./af.js":"DMd3","./ar":"V5uq","./ar-dz":"ZlOZ","./ar-dz.js":"ZlOZ","./ar-kw":"QkGj","./ar-kw.js":"QkGj","./ar-ly":"c9ne","./ar-ly.js":"c9ne","./ar-ma":"QZgE","./ar-ma.js":"QZgE","./ar-sa":"XQyA","./ar-sa.js":"XQyA","./ar-tn":"aHVQ","./ar-tn.js":"aHVQ","./ar.js":"V5uq","./az":"HZnN","./az.js":"HZnN","./be":"bVSf","./be.js":"bVSf","./bg":"I5ck","./bg.js":"I5ck","./bm":"SUhV","./bm.js":"SUhV","./bn":"2iG6","./bn-bd":"pL9F","./bn-bd.js":"pL9F","./bn.js":"2iG6","./bo":"cWnb","./bo.js":"cWnb","./br":"3lRP","./br.js":"3lRP","./bs":"pPuy","./bs.js":"pPuy","./ca":"TGkz","./ca.js":"TGkz","./cs":"dr47","./cs.js":"dr47","./cv":"xHW1","./cv.js":"xHW1","./cy":"HZ+Y","./cy.js":"HZ+Y","./da":"3CFF","./da.js":"3CFF","./de":"2YCs","./de-at":"emcn","./de-at.js":"emcn","./de-ch":"VspD","./de-ch.js":"VspD","./de.js":"2YCs","./dv":"v+nZ","./dv.js":"v+nZ","./el":"IVWY","./el.js":"IVWY","./en-au":"fgMQ","./en-au.js":"fgMQ","./en-ca":"9O6x","./en-ca.js":"9O6x","./en-gb":"C8Ks","./en-gb.js":"C8Ks","./en-ie":"Guoq","./en-ie.js":"Guoq","./en-il":"pAFd","./en-il.js":"pAFd","./en-in":"gwcs","./en-in.js":"gwcs","./en-nz":"BXwR","./en-nz.js":"BXwR","./en-sg":"Gx3T","./en-sg.js":"Gx3T","./eo":"SyIA","./eo.js":"SyIA","./es":"P39S","./es-do":"Zr3G","./es-do.js":"Zr3G","./es-mx":"R8E5","./es-mx.js":"R8E5","./es-us":"XyK+","./es-us.js":"XyK+","./es.js":"P39S","./et":"nsca","./et.js":"nsca","./eu":"EGkk","./eu.js":"EGkk","./fa":"hFC+","./fa.js":"hFC+","./fi":"QZnC","./fi.js":"QZnC","./fil":"yjnK","./fil.js":"yjnK","./fo":"Eh/V","./fo.js":"Eh/V","./fr":"dqJ6","./fr-ca":"UJ1w","./fr-ca.js":"UJ1w","./fr-ch":"jUG3","./fr-ch.js":"jUG3","./fr.js":"dqJ6","./fy":"2Y+u","./fy.js":"2Y+u","./ga":"fP5U","./ga.js":"fP5U","./gd":"HNnd","./gd.js":"HNnd","./gl":"csFA","./gl.js":"csFA","./gom-deva":"v9Un","./gom-deva.js":"v9Un","./gom-latn":"Is64","./gom-latn.js":"Is64","./gu":"ytb1","./gu.js":"ytb1","./he":"3ukh","./he.js":"3ukh","./hi":"cir5","./hi.js":"cir5","./hr":"5/WS","./hr.js":"5/WS","./hu":"3C4D","./hu.js":"3C4D","./hy-am":"mIMg","./hy-am.js":"mIMg","./id":"lq5T","./id.js":"lq5T","./is":"M62V","./is.js":"M62V","./it":"EsV5","./it-ch":"gK9f","./it-ch.js":"gK9f","./it.js":"EsV5","./ja":"w9bl","./ja.js":"w9bl","./jv":"haXP","./jv.js":"haXP","./ka":"m5zV","./ka.js":"m5zV","./kk":"qLxw","./kk.js":"qLxw","./km":"w6w2","./km.js":"w6w2","./kn":"8Psv","./kn.js":"8Psv","./ko":"grrN","./ko.js":"grrN","./ku":"LA3b","./ku.js":"LA3b","./ky":"xN7O","./ky.js":"xN7O","./lb":"3MLE","./lb.js":"3MLE","./lo":"V1Nm","./lo.js":"V1Nm","./lt":"jHKF","./lt.js":"jHKF","./lv":"ofGP","./lv.js":"ofGP","./me":"qzFN","./me.js":"qzFN","./mi":"pI6/","./mi.js":"pI6/","./mk":"it99","./mk.js":"it99","./ml":"QCEW","./ml.js":"QCEW","./mn":"aEc7","./mn.js":"aEc7","./mr":"/AhN","./mr.js":"/AhN","./ms":"qp2u","./ms-my":"ytBS","./ms-my.js":"ytBS","./ms.js":"qp2u","./mt":"LHwr","./mt.js":"LHwr","./my":"cZ++","./my.js":"cZ++","./nb":"sXFW","./nb.js":"sXFW","./ne":"OqlK","./ne.js":"OqlK","./nl":"gz0p","./nl-be":"1c87","./nl-be.js":"1c87","./nl.js":"gz0p","./nn":"yEIC","./nn.js":"yEIC","./oc-lnc":"WHIy","./oc-lnc.js":"WHIy","./pa-in":"In9j","./pa-in.js":"In9j","./pl":"sYsF","./pl.js":"sYsF","./pt":"M5aA","./pt-br":"FL2Y","./pt-br.js":"FL2Y","./pt.js":"M5aA","./ro":"pzLN","./ro.js":"pzLN","./ru":"3DQJ","./ru.js":"3DQJ","./sd":"J2Qk","./sd.js":"J2Qk","./se":"7ma1","./se.js":"7ma1","./si":"sjgc","./si.js":"sjgc","./sk":"fn8n","./sk.js":"fn8n","./sl":"bGi8","./sl.js":"bGi8","./sq":"75i0","./sq.js":"75i0","./sr":"U2RI","./sr-cyrl":"r8Zk","./sr-cyrl.js":"r8Zk","./sr.js":"U2RI","./ss":"JXU5","./ss.js":"JXU5","./sv":"cIMW","./sv.js":"cIMW","./sw":"ryRQ","./sw.js":"ryRQ","./ta":"hNjb","./ta.js":"hNjb","./te":"fmJ/","./te.js":"fmJ/","./tet":"oGrL","./tet.js":"oGrL","./tg":"ItXd","./tg.js":"ItXd","./th":"wxcM","./th.js":"wxcM","./tk":"llaT","./tk.js":"llaT","./tl-ph":"wOon","./tl-ph.js":"wOon","./tlh":"jMfG","./tlh.js":"jMfG","./tr":"Adq8","./tr.js":"Adq8","./tzl":"OIFh","./tzl.js":"OIFh","./tzm":"oPmo","./tzm-latn":"xXRz","./tzm-latn.js":"xXRz","./tzm.js":"oPmo","./ug-cn":"K89W","./ug-cn.js":"K89W","./uk":"kr7y","./uk.js":"kr7y","./ur":"VT2A","./ur.js":"VT2A","./uz":"MW2X","./uz-latn":"x9cz","./uz-latn.js":"x9cz","./uz.js":"MW2X","./vi":"G0Ye","./vi.js":"G0Ye","./x-pseudo":"7xkf","./x-pseudo.js":"7xkf","./yo":"u1YX","./yo.js":"u1YX","./zh-cn":"cLZ+","./zh-cn.js":"cLZ+","./zh-hk":"5qPz","./zh-hk.js":"5qPz","./zh-mo":"xbeu","./zh-mo.js":"xbeu","./zh-tw":"dOkB","./zh-tw.js":"dOkB"};function l(t){return a(n(t))}function n(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}l.keys=function(){return Object.keys(s)},l.resolve=n,t.exports=l,l.id="zenm"}},["NHnr"]);
//# sourceMappingURL=app.77f795b611a6e8e3f05f.js.map