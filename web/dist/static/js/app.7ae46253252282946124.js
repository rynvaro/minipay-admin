webpackJsonp([1],{"30nI":function(t,e){},"38ua":function(t,e){},"7Nll":function(t,e,a){var l={"./af":"6opA","./af.js":"6opA","./ar":"va3n","./ar-dz":"d93I","./ar-dz.js":"d93I","./ar-kw":"6cP5","./ar-kw.js":"6cP5","./ar-ly":"CJol","./ar-ly.js":"CJol","./ar-ma":"xswi","./ar-ma.js":"xswi","./ar-sa":"oPaZ","./ar-sa.js":"oPaZ","./ar-tn":"tHbo","./ar-tn.js":"tHbo","./ar.js":"va3n","./az":"9piz","./az.js":"9piz","./be":"ROSN","./be.js":"ROSN","./bg":"IDoF","./bg.js":"IDoF","./bm":"rLMh","./bm.js":"rLMh","./bn":"4j5i","./bn.js":"4j5i","./bo":"ThD/","./bo.js":"ThD/","./br":"DHvG","./br.js":"DHvG","./bs":"c9km","./bs.js":"c9km","./ca":"6Wg1","./ca.js":"6Wg1","./cs":"LSVY","./cs.js":"LSVY","./cv":"ZsN8","./cv.js":"ZsN8","./cy":"fcWb","./cy.js":"fcWb","./da":"dvcE","./da.js":"dvcE","./de":"jOEy","./de-at":"KBEb","./de-at.js":"KBEb","./de-ch":"NKtE","./de-ch.js":"NKtE","./de.js":"jOEy","./dv":"BSYj","./dv.js":"BSYj","./el":"tZzB","./el.js":"tZzB","./en-au":"XJEP","./en-au.js":"XJEP","./en-ca":"HQFG","./en-ca.js":"HQFG","./en-gb":"yD/3","./en-gb.js":"yD/3","./en-ie":"/Ici","./en-ie.js":"/Ici","./en-il":"gBfz","./en-il.js":"gBfz","./en-in":"uN6U","./en-in.js":"uN6U","./en-nz":"PHpv","./en-nz.js":"PHpv","./en-sg":"jCHj","./en-sg.js":"jCHj","./eo":"u70g","./eo.js":"u70g","./es":"TwNH","./es-do":"u7ZL","./es-do.js":"u7ZL","./es-us":"E37n","./es-us.js":"E37n","./es.js":"TwNH","./et":"NBKc","./et.js":"NBKc","./eu":"L87q","./eu.js":"L87q","./fa":"ufWw","./fa.js":"ufWw","./fi":"qi4J","./fi.js":"qi4J","./fil":"G5st","./fil.js":"G5st","./fo":"euq0","./fo.js":"euq0","./fr":"w8XJ","./fr-ca":"Sg7c","./fr-ca.js":"Sg7c","./fr-ch":"rBN7","./fr-ch.js":"rBN7","./fr.js":"w8XJ","./fy":"yqUd","./fy.js":"yqUd","./ga":"HTua","./ga.js":"HTua","./gd":"riOH","./gd.js":"riOH","./gl":"MQxw","./gl.js":"MQxw","./gom-deva":"NuzU","./gom-deva.js":"NuzU","./gom-latn":"yZpq","./gom-latn.js":"yZpq","./gu":"AYyW","./gu.js":"AYyW","./he":"FRh9","./he.js":"FRh9","./hi":"McDK","./hi.js":"McDK","./hr":"4omP","./hr.js":"4omP","./hu":"u8sL","./hu.js":"u8sL","./hy-am":"sluU","./hy-am.js":"sluU","./id":"Pt49","./id.js":"Pt49","./is":"9fDX","./is.js":"9fDX","./it":"uaqK","./it-ch":"ldCU","./it-ch.js":"ldCU","./it.js":"uaqK","./ja":"bJET","./ja.js":"bJET","./jv":"2/4w","./jv.js":"2/4w","./ka":"ejSE","./ka.js":"ejSE","./kk":"B8Ef","./kk.js":"B8Ef","./km":"RU/R","./km.js":"RU/R","./kn":"g4T0","./kn.js":"g4T0","./ko":"dTbc","./ko.js":"dTbc","./ku":"YMHa","./ku.js":"YMHa","./ky":"gQCl","./ky.js":"gQCl","./lb":"JECy","./lb.js":"JECy","./lo":"1gLW","./lo.js":"1gLW","./lt":"Lb6T","./lt.js":"Lb6T","./lv":"Jazy","./lv.js":"Jazy","./me":"FYSe","./me.js":"FYSe","./mi":"siVi","./mi.js":"siVi","./mk":"02DT","./mk.js":"02DT","./ml":"XzjM","./ml.js":"XzjM","./mn":"pUD0","./mn.js":"pUD0","./mr":"0VBm","./mr.js":"0VBm","./ms":"q39C","./ms-my":"vTR1","./ms-my.js":"vTR1","./ms.js":"q39C","./mt":"wErx","./mt.js":"wErx","./my":"lDdr","./my.js":"lDdr","./nb":"LV0i","./nb.js":"LV0i","./ne":"e28Q","./ne.js":"e28Q","./nl":"8Bt5","./nl-be":"8Pbu","./nl-be.js":"8Pbu","./nl.js":"8Bt5","./nn":"O2GA","./nn.js":"O2GA","./oc-lnc":"SV7N","./oc-lnc.js":"SV7N","./pa-in":"Msd+","./pa-in.js":"Msd+","./pl":"25bu","./pl.js":"25bu","./pt":"grtQ","./pt-br":"elto","./pt-br.js":"elto","./pt.js":"grtQ","./ro":"BzGN","./ro.js":"BzGN","./ru":"5Luo","./ru.js":"5Luo","./sd":"uwbX","./sd.js":"uwbX","./se":"yPul","./se.js":"yPul","./si":"rIfv","./si.js":"rIfv","./sk":"EZ27","./sk.js":"EZ27","./sl":"z9bn","./sl.js":"z9bn","./sq":"q/8+","./sq.js":"q/8+","./sr":"UK9b","./sr-cyrl":"yvYH","./sr-cyrl.js":"yvYH","./sr.js":"UK9b","./ss":"0Kgx","./ss.js":"0Kgx","./sv":"FUxq","./sv.js":"FUxq","./sw":"nGrr","./sw.js":"nGrr","./ta":"RP+G","./ta.js":"RP+G","./te":"hzCj","./te.js":"hzCj","./tet":"MfD0","./tet.js":"MfD0","./tg":"TD+I","./tg.js":"TD+I","./th":"5Xm6","./th.js":"5Xm6","./tk":"MYnY","./tk.js":"MYnY","./tl-ph":"Fiqp","./tl-ph.js":"Fiqp","./tlh":"2O9F","./tlh.js":"2O9F","./tr":"szlP","./tr.js":"szlP","./tzl":"Es+I","./tzl.js":"Es+I","./tzm":"F8Jt","./tzm-latn":"3BsC","./tzm-latn.js":"3BsC","./tzm.js":"F8Jt","./ug-cn":"sSM2","./ug-cn.js":"sSM2","./uk":"AT+N","./uk.js":"AT+N","./ur":"UsWe","./ur.js":"UsWe","./uz":"fHC4","./uz-latn":"/UU3","./uz-latn.js":"/UU3","./uz.js":"fHC4","./vi":"TQ3F","./vi.js":"TQ3F","./x-pseudo":"Z8kd","./x-pseudo.js":"Z8kd","./yo":"OfoV","./yo.js":"OfoV","./zh-cn":"Ho5t","./zh-cn.js":"Ho5t","./zh-hk":"qsdv","./zh-hk.js":"qsdv","./zh-mo":"3HJV","./zh-mo.js":"3HJV","./zh-tw":"CijP","./zh-tw.js":"CijP"};function s(t){return a(o(t))}function o(t){var e=l[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(l)},s.resolve=o,t.exports=s,s.id="7Nll"},EmTe:function(t,e){},GAw5:function(t,e){},KWBv:function(t,e){},"MY/7":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("+RKF"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",[t._v(t._s(t.navList[t.navIndex].navItem))]),t._v(" "),a("el-container",[a("el-aside",{attrs:{width:"150px"}},[a("el-col",{attrs:{span:2}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.$route.path,router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},t._l(t.navList,function(e,l){return a("el-menu-item",{key:l,attrs:{index:e.name},on:{click:function(e){return t.itemclick(l)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-platform"}),a("span",[t._v(" "+t._s(e.navItem))])])],2)}),1)],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")({data:function(){return{navIndex:0,navList:[{name:"/components/pubstores",navItem:"商家发布"},{name:"/components/stores",navItem:"商家列表"},{name:"/components/plates",navItem:"推荐板块"},{name:"/components/coupons",navItem:"板块详情"},{name:"/components/users",navItem:"用户列表"},{name:"/components/events",navItem:"活动列表"},{name:"/components/finance",navItem:"财务板块"},{name:"/components/withdraws",navItem:"提现板块"},{name:"/components/others",navItem:"其他杂项"}]}},methods:{itemclick:function(t){this.navIndex=t}},mounted:function(){}},s,!1,function(t){a("hbz1")},null,null).exports,n=a("Fa/W"),i=a("L+OJ"),r=a.n(i),c=a("bQIR"),u=a.n(c),d={data:function(){return{plates:[],dialogFormVisible:!1,newPlate:{title:"",index:-1,image:"",linkTo:""},links:[{value:"1",label:"超实惠"},{value:"2",label:"最新鲜"},{value:"3",label:"生活丽人"},{value:"4",label:"食在上饶"},{value:"5",label:"玩乐途游"},{value:"6",label:"附近商家"}]}},methods:{doAddNewPlate:function(){var t=this;if(this.newPlate.title)if(-1!=this.newPlate.index)if(this.newPlate.image)if(this.newPlate.linkTo){var e=c.Loading.service({fullscreen:!0});this.newPlate.tp=1,r.a.post("http://localhost:8090/addplate",this.newPlate).then(function(a){e.close(),200!=a.status?t.$message.error("更新失败"):(t.dialogFormVisible=!1,console.log(a.data),t.plates.push({_id:a.data._id,title:a.data.title,index:a.data.index,items:a.data.items}),t.$message.success("成功")),t.newPlate.title="",t.newPlate.index=-1,t.newPlate.image="",t.newPlate.linkTo=""})}else this.$message.error("请选择跳转连接");else this.$message.error("请上传板块图片");else this.$message.error("请输入展示位置");else this.$message.error("请输入板块标题")},onNewPlateImageUploadSuccess:function(t){this.newPlate.image=t},edit:function(t){this.$router.push({name:"coupons",params:{_id:t._id}})},hide:function(t,e){var a=this;r.a.post("http://localhost:8090/proxy",{tp:"switchplatestatus",_id:t._id,status:0}).then(function(t){200==t.status?(a.$message.success("已隐藏"),a.plates[e].status=0):a.$message.error("操作失败")})},show:function(t,e){var a=this;r.a.post("http://localhost:8090/proxy",{tp:"switchplatestatus",_id:t._id,status:1}).then(function(t){200==t.status?(a.$message.success("已显示"),a.plates[e].status=1):a.$message.error("操作失败")})},addPlate:function(){this.dialogFormVisible=!0},submitUpload:function(t){switch(t){case 10:this.$refs.newPlate.submit()}}},mounted:function(){var t=this;r.a.get("http://localhost:8090/plates").then(function(e){t.plates=e.data.data})}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.plates}},[a("el-table-column",{attrs:{label:"标题",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"位置",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.index))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("正常显示")]):t._e(),t._v(" "),0===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已隐藏")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.hide(e.row,e.$index)}}},[t._v("隐藏")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.show(e.row,e.$index)}}},[t._v("显示")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增板块",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("标题：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.newPlate.title,callback:function(e){t.$set(t.newPlate,"title",e)},expression:"newPlate.title"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("位置：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入位置",clearable:""},model:{value:t.newPlate.index,callback:function(e){t.$set(t.newPlate,"index",e)},expression:"newPlate.index"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"newPlate",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onNewPlateImageUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(10)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("跳转连接：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{filterable:"",placeholder:"跳转连接"},model:{value:t.newPlate.linkTo,callback:function(e){t.$set(t.newPlate,"linkTo",e)},expression:"newPlate.linkTo"}},t._l(t.links,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doAddNewPlate}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addPlate}},[t._v("新增板块")])],1)},staticRenderFns:[]};var v=a("C7Lr")(d,p,!1,function(t){a("30nI")},null,null).exports,m={data:function(){return{id:this.$route.params._id,q:"",plate:{items:[]},stores:[],storeIndex:"",dialogFormVisible:!1,itemImage:"",plateImageList:[],links:[{value:"1",label:"超实惠"},{value:"2",label:"最新鲜"},{value:"3",label:"生活丽人"},{value:"4",label:"食在上饶"},{value:"5",label:"玩乐途游"},{value:"6",label:"附近商家"}]}},methods:{onSelectChange:function(t){console.log(t)},handleDelete:function(t,e){e.splice(t,1)},addNewList:function(){var t=this;r.a.post("http://localhost:8090/stores",{q:this.q,currentPage:1,pageSize:20}).then(function(e){t.stores=e.data.data}),this.dialogFormVisible=!0},doAddNewList:function(){if(""!==this.storeIndex)if(this.itemImage){var t=this.stores[this.storeIndex];this.plate.items.push({storeId:t._id,title:t.storeName,discount:t.discount,image:this.itemImage,desc:t.storeDesc}),this.storeIndex="",this.itemImage="",this.dialogFormVisible=!1}else this.$message.error("请上传推广图片");else this.$message.error("请选择商家")},onItemUploadSuccess:function(t){this.itemImage=t},onUploadPlateImageSuccess:function(t){this.plate.image=t},submitUpload:function(t){switch(t){case 1:this.$refs.plateImage.submit();break;case 2:this.$refs.item.submit()}},doUpdate:function(){var t=this;this.id?(this.plate.tp=2,r.a.post("http://localhost:8090/updateplate",this.plate).then(function(e){200!=e.status?t.$message.error("更新失败"):t.$message.success("成功")})):this.$message.error("请从推荐板块进入此页面")}},mounted:function(){var t=this;this.id&&r.a.get("http://localhost:8090/plate?id="+this.id).then(function(e){t.plate=e.data.data})}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("板块名称：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.plate.title,callback:function(e){t.$set(t.plate,"title",e)},expression:"plate.title"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("跳转连接：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{filterable:"",placeholder:"跳转连接"},model:{value:t.plate.linkTo,callback:function(e){t.$set(t.plate,"linkTo",e)},expression:"plate.linkTo"}},t._l(t.links,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("板块位置：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.plate.index,callback:function(e){t.$set(t.plate,"index",e)},expression:"plate.index"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("板块图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"plateImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.plateImageList,"on-success":t.onUploadPlateImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20}},[t._v("推荐列表")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.plate.items}},[a("el-table-column",{attrs:{label:"商家ID",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.storeId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"折扣",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.discount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"描述信息",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.desc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,t.plate.items)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增推荐",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{filterable:"",placeholder:"搜索商家"},model:{value:t.storeIndex,callback:function(e){t.storeIndex=e},expression:"storeIndex"}},t._l(t.stores,function(t,e){return a("el-option",{key:t._id,attrs:{label:t.storeName,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"item",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onItemUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(2)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doAddNewList}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addNewList}},[t._v("新增一条推荐")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:t.doUpdate}},[t._v("更新本页")])],1)},staticRenderFns:[]};var b=a("C7Lr")(m,h,!1,function(t){a("38ua")},null,null).exports,f={data:function(){return{id:this.$route.params._id,tmpFiles:[],mapVisible:!1,storeName:"",storeDesc:"",startTime:"",endTime:"",options:[{value:0,label:"0.0 折"},{value:.1,label:"0.1 折"},{value:.2,label:"0.2 折"},{value:.3,label:"0.3 折"},{value:.4,label:"0.4 折"},{value:.5,label:"0.5 折"},{value:.6,label:"0.6 折"},{value:.7,label:"0.7 折"},{value:.8,label:"0.8 折"},{value:.9,label:"0.9 折"},{value:1,label:"1.0 折"},{value:1.1,label:"1.1 折"},{value:1.2,label:"1.2 折"},{value:1.3,label:"1.3 折"},{value:1.4,label:"1.4 折"},{value:1.5,label:"1.5 折"},{value:1.6,label:"1.6 折"},{value:1.7,label:"1.7 折"},{value:1.8,label:"1.8 折"},{value:1.9,label:"1.9 折"},{value:2,label:"2.0 折"},{value:2.1,label:"2.1 折"},{value:2.2,label:"2.2 折"},{value:2.3,label:"2.3 折"},{value:2.4,label:"2.4 折"},{value:2.5,label:"2.5 折"},{value:2.6,label:"2.6 折"},{value:2.7,label:"2.7 折"},{value:2.8,label:"2.8 折"},{value:2.9,label:"2.9 折"},{value:3,label:"3.0 折"},{value:3.1,label:"3.1 折"},{value:3.2,label:"3.2 折"},{value:3.3,label:"3.3 折"},{value:3.4,label:"3.4 折"},{value:3.5,label:"3.5 折"},{value:3.6,label:"3.6 折"},{value:3.7,label:"3.7 折"},{value:3.8,label:"3.8 折"},{value:3.9,label:"3.9 折"},{value:4,label:"4.0 折"},{value:4.1,label:"4.1 折"},{value:4.2,label:"4.2 折"},{value:4.3,label:"4.3 折"},{value:4.4,label:"4.4 折"},{value:4.5,label:"4.5 折"},{value:4.6,label:"4.6 折"},{value:4.7,label:"4.7 折"},{value:4.8,label:"4.8 折"},{value:4.9,label:"4.9 折"},{value:5,label:"5.0 折"},{value:5.1,label:"5.1 折"},{value:5.2,label:"5.2 折"},{value:5.3,label:"5.3 折"},{value:5.4,label:"5.4 折"},{value:5.5,label:"5.5 折"},{value:5.6,label:"5.6 折"},{value:5.7,label:"5.7 折"},{value:5.8,label:"5.8 折"},{value:5.9,label:"5.9 折"},{value:6,label:"6.0 折"},{value:6.1,label:"6.1 折"},{value:6.2,label:"6.2 折"},{value:6.3,label:"6.3 折"},{value:6.4,label:"6.4 折"},{value:6.5,label:"6.5 折"},{value:6.6,label:"6.6 折"},{value:6.7,label:"6.7 折"},{value:6.8,label:"6.8 折"},{value:6.9,label:"6.9 折"},{value:7,label:"7.0 折"},{value:7.1,label:"7.1 折"},{value:7.2,label:"7.2 折"},{value:7.3,label:"7.3 折"},{value:7.4,label:"7.4 折"},{value:7.5,label:"7.5 折"},{value:7.6,label:"7.6 折"},{value:7.7,label:"7.7 折"},{value:7.8,label:"7.8 折"},{value:7.9,label:"7.9 折"},{value:8,label:"8.0 折"},{value:8.1,label:"8.1 折"},{value:8.2,label:"8.2 折"},{value:8.3,label:"8.3 折"},{value:8.4,label:"8.4 折"},{value:8.5,label:"8.5 折"},{value:8.6,label:"8.6 折"},{value:8.7,label:"8.7 折"},{value:8.8,label:"8.8 折"},{value:8.9,label:"8.9 折"},{value:9,label:"9.0 折"},{value:9.1,label:"9.1 折"},{value:9.2,label:"9.2 折"},{value:9.3,label:"9.3 折"},{value:9.4,label:"9.4 折"},{value:9.5,label:"9.5 折"},{value:9.6,label:"9.6 折"},{value:9.7,label:"9.7 折"},{value:9.8,label:"9.8 折"},{value:9.9,label:"9.9 折"}],discount:9,discountDate:[],storeType:1,longitude:"",latitude:"",address:"",center:{lng:0,lat:0},zoom:15,keyword:"7hao",videoList:[],imageList:[],storeImageList:[],productImageList:[],promoteImageList:[],banners:[],storeImages:[],productImages:[],promoteImages:[],merchantName:"",merchantPhone:"",bank:"",merchantBankCard:""}},methods:{doPublish:function(){var t=this;if(this.storeName)if(this.storeDesc)if(this.startTime&&this.endTime)if(this.discount)if(2==this.discountDate.length)if(this.storeType)if(0!=this.banners.length)if(0!=this.storeImages.length)if(0!=this.productImages.length)if(0!=this.promoteImages.length)if(this.longitude&&this.latitude)if(this.address)if(this.merchantName)if(this.merchantPhone)if(this.bank)if(this.merchantBankCard){var e={id:this.id,storeName:this.storeName,storeDesc:this.storeDesc,startTime:this.startTime,endTime:this.endTime,discount:this.discount,discountStart:this.discountDate[0],discountEnd:this.discountDate[1],storeType:this.storeType,longitude:this.longitude,latitude:this.latitude,address:this.address,banners:this.banners,storeImages:this.storeImages,productImages:this.productImages,promoteImages:this.promoteImages,merchantName:this.merchantName,merchantPhone:this.merchantPhone,bank:this.bank,merchantBankCard:this.merchantBankCard},a=c.Loading.service({fullscreen:!0});r.a.post("http://localhost:8090/publish",e).then(function(e){200==e.status?t.$alert("发布成功"):t.$alert("发布失败"),a.close()})}else this.$message.error("请输入商家银行卡号");else this.$message.error("请输入开户行");else this.$message.error("请输入商家手机号");else this.$message.error("请输入商家姓名");else this.$message.error("请输入详细地址");else this.$message.error("请输入经纬度信息");else this.$message.error("请上传推广图片");else this.$message.error("请上传产品图片");else this.$message.error("请上传门头图片");else this.$message.error("请上传至少一个轮播视频或者图片");else this.$message.error("请选择餐饮类型");else this.$message.error("请选择折扣时间");else this.$message.error("请选择折扣信息");else this.$message.error("请输入营业时间");else this.$message.error("请输入店铺描述");else this.$message.error("请输入店铺名称")},onUploadVideoSuccess:function(t){this.banners.push({isVideo:!0,url:t}),this.$message.success("上传视频成功")},onUploadImageSuccess:function(t){this.banners.push({isVideo:!1,url:t}),this.$message.success("上传图片成功")},onUploadStoreImageSuccess:function(t){this.storeImages.push(t),this.banners.push({isVideo:!1,url:t}),this.$message.success("上传店铺门头成功")},onUploadProductImageSuccess:function(t){this.productImages.push(t),this.$message.success("上传产品图片成功")},onUploadPromoteImageSuccess:function(t){this.promoteImages.push(t),this.banners.push({isVideo:!1,url:t}),this.$message.success("上传产品图片成功")},deleteImage:function(t,e){this.$message.success(t),this.tmpFiles.splice(e,1);for(var a=0;a<this.banners.length;a++)this.banners[a].url==t&&this.banners.splice(a,1);for(a=0;a<this.storeImages.length;a++)this.storeImages[a]==t&&this.storeImages.splice(a,1);for(a=0;a<this.productImages.length;a++)this.productImages[a]==t&&this.productImages.splice(a,1);for(a=0;a<this.promoteImages.length;a++)this.promoteImages[a]==t&&this.promoteImages.splice(a,1)},onExceed:function(){alert("超出数量")},submitUpload:function(t){switch(t){case 1:this.$refs.video.submit();break;case 2:this.$refs.image.submit();break;case 3:this.$refs.storeImage.submit();break;case 4:this.$refs.productImage.submit();break;case 5:this.$refs.promoteImage.submit()}},infohtmlset:function(t){console.log(t),this.address=t.address,this.longitude=t.point.lng,this.latitude=t.point.lat,this.mapVisible=!1}},mounted:function(){var t=this;this.center.lng=116.24,this.center.lat=40.047,this.zoom=15,this.id&&r.a.get("http://localhost:8090/store?id="+this.id).then(function(e){console.log(e.data);var a=JSON.parse(e.data.resp_data).data;t.storeName=a.storeName,t.storeDesc=a.storeDesc,t.startTime=a.startTime,t.endTime=a.endTime,t.discount=a.discount,t.discountDate=[a.discountStart,a.discountEnd],t.storeType=a.storeType,t.banners=a.banners,t.storeImages=a.storeImages,t.productImages=a.productImages,t.promoteImages=a.promoteImages,t.longitude=a.longitude,t.latitude=a.latitude,t.address=a.address,t.merchantName=a.merchantName,t.merchantPhone=a.merchantPhone,t.merchantBankCard=a.merchantBankCard,t.bank=a.bank,t.tmpFiles=e.data.file_list;for(var l=0;l<t.tmpFiles.length;l++)-1!=t.tmpFiles[l].download_url.indexOf("mp4")?t.tmpFiles[l].isVideo=!0:t.tmpFiles[l].isVideo=!1})}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("店铺名称：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入店铺名称",clearable:""},model:{value:t.storeName,callback:function(e){t.storeName=e},expression:"storeName"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("商家描述：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入商家描述",clearable:""},model:{value:t.storeDesc,callback:function(e){t.storeDesc=e},expression:"storeDesc"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("营业时间：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"00:00",step:"00:30",end:"24:00"}},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t._v(" "),a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:t.startTime}},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("折扣信息：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"选择折扣"},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.discountDate,callback:function(e){t.discountDate=e},expression:"discountDate"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("店铺类型：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-radio-group",{model:{value:t.storeType,callback:function(e){t.storeType=e},expression:"storeType"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("餐饮")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("娱乐")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("其他")])],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("轮播视频：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"video",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.videoList,"on-success":t.onUploadVideoSuccess,"auto-upload":!1,accept:".mp4"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("轮播图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"image",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.imageList,"on-success":t.onUploadImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(2)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("店铺门头：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"storeImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.storeImageList,"on-success":t.onUploadStoreImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(3)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("产品图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"productImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.productImageList,"on-success":t.onUploadProductImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(4)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("推广图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"promoteImage",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:!0,limit:6,"file-list":t.promoteImageList,"on-success":t.onUploadPromoteImageSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(5)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",t._l(t.tmpFiles,function(e,l){return a("el-col",{key:l,attrs:{span:4}},[e.isVideo?a("video",{staticStyle:{width:"100px",height:"100px"},attrs:{controls:"",src:e.download_url}}):t._e(),t._v(" "),e.isVideo?t._e():a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.download_url,fit:t.cover}}),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteImage(e.fileid,l)}}},[t._v("删除")])],1)}),1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"title"},[t._v("位置信息")])])],1),t._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("经度：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{placeholder:"0.00",clearable:""},model:{value:t.longitude,callback:function(e){t.longitude=t._n(e)},expression:"longitude"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("纬度：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{placeholder:"0.00",clearable:""},model:{value:t.latitude,callback:function(e){t.latitude=t._n(e)},expression:"latitude"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.mapVisible=!t.mapVisible}}},[t._v("地图获取")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("详细地址：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.mapVisible,expression:"mapVisible"}],attrs:{span:14}},[a("el-input",{attrs:{placeholder:"搜索位置",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("baidu-map",[a("bm-view",{staticClass:"map",attrs:{center:t.center,zoom:t.zoom}}),t._v(" "),a("bm-local-search",{attrs:{keyword:t.keyword,"auto-viewport":!0},on:{infohtmlset:t.infohtmlset}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"title"},[t._v("商家信息")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("商家姓名：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:t.merchantName,callback:function(e){t.merchantName=e},expression:"merchantName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("手机号：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:t.merchantPhone,callback:function(e){t.merchantPhone=e},expression:"merchantPhone"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("开户行：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"title"},[t._v("银行卡号：")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.merchantBankCard,callback:function(e){t.merchantBankCard=e},expression:"merchantBankCard"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.doPublish}},[t._v("发布商家")])],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(f,_,!1,function(t){a("MY/7")},null,null).exports,y=a("LqYc"),w=a.n(y),k={data:function(){return{stores:[],q:"",qrcode:"",innerVisible:!1,currentPage:1,pageSize:10,totalCount:0}},methods:{handleSizeChange:function(t){var e=this;this.pageSize=t,this.currentPage=1,r.a.post("http://localhost:8090/stores",{q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.stores=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount})},handleCurrentChange:function(t){var e=this;this.currentPage=t,r.a.post("http://localhost:8090/stores",{q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(t){console.log(t.data),e.stores=t.data.data,e.currentPage=t.data.currentPage,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount})},allQRcode:function(){this.$router.push({name:"qrcodes",params:{stores:this.stores}})},handleClick:function(t){this.$router.push({name:"pubstores",params:{_id:t._id}})},handleHardDelete:function(t,e){var a=this,l=c.Loading.service({fullscreen:!0});r.a.post("http://localhost:8090/storedelete",{tp:"storedeletehard",_id:t._id}).then(function(t){200==t.status?(a.$message.success("删除成功"),a.stores.splice(e,1)):a.$message.error("删除失败"),l.close()})},handleDelete:function(t,e){var a=this;r.a.post("http://localhost:8090/storedelete",{tp:"storedelete",_id:t._id,deleted:1}).then(function(t){200==t.status?(a.$message.success("隐藏成功"),a.stores[e].deleted=1):a.$message.error("隐藏失败")})},handleUnDelete:function(t,e){var a=this;r.a.post("http://localhost:8090/storedelete",{tp:"storedelete",_id:t._id,deleted:0}).then(function(t){200==t.status?(a.$message.success("显示成功"),a.stores[e].deleted=0):a.$message.error("显示失败")})},search:function(){var t=this;r.a.post("http://localhost:8090/stores",{q:this.q,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){t.stores=e.data.data})},showQRCode:function(t){var e=this;this.innerVisible=!0,this.qrcode=t._id,this.$nextTick(function(){e.createQrcode()})},createQrcode:function(){this.qr=new w.a("qrcode",{width:150,height:150,text:this.qrcode})},closeCode:function(){this.$refs.qrcode.innerHTML=""}},mounted:function(){var t=this;r.a.post("http://localhost:8090/stores",{q:"",currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){console.log(e.data),t.stores=e.data.data,t.currentPage=e.data.currentPage,t.pageSize=e.data.pageSize,t.totalCount=e.data.totalCount})}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"搜索商家",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{on:{click:t.allQRcode}},[t._v("统一生成二维码")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("span",[t._v("本页条数："+t._s(t.stores.length))])])],1),t._v(" "),a("el-dialog",{attrs:{width:"30%",visible:t.innerVisible,"append-to-body":""},on:{close:t.closeCode,"update:visible":function(e){t.innerVisible=e}}},[a("div",{staticClass:"qrcode"},[a("div",{ref:"qrcode",attrs:{id:"qrcode"}})])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stores}},[a("el-table-column",{attrs:{prop:"merchantName",label:"商家姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantPhone",label:"联系方式",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeDesc",label:"店铺详情"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deleted",label:"地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.deleted?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已隐藏")]):t._e(),t._v(" "),0===e.row.deleted?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("正常显示")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row,e.$index)}}},[t._v("隐藏")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleUnDelete(e.row,e.$index)}}},[t._v("显示")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showQRCode(e.row)}}},[t._v("查看二维码")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleHardDelete(e.row,e.$index)}}},[t._v("硬删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var C=a("C7Lr")(k,x,!1,function(t){a("OLe+")},null,null).exports,S=a("Nuww"),j=a.n(S),$={data:function(){return{users:[]}},methods:{createAtDateFormater:function(t,e){var a=t[e.property];return 0==a?"":j()(a).format("YYYY-MM-DD")},dateFormater:function(t,e){var a=t.data[e.property];return 0==a?"未签到":j()(a).format("YYYY-MM-DD")},handleClick:function(t,e){var a=this;this.$prompt("输入数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(l){var s=l.value;switch(e){case 1:return s>1?void a.$message({type:"error",message:"一次只能发放一个"}):(t.tp=2,void r.a.post("http://localhost:8090/addcoupon",t).then(function(t){console.log(t),200==t.status?a.$message.success("成功"):a.$message.error("失败")}));case 2:t.data.exp+=parseInt(s);break;case 3:t.data.signs+=parseInt(s),t.data.sevenSigns+=parseInt(s),t.data.signDate=Date.parse(new Date);break;case 4:t.data.point+=parseInt(s);break;case 5:t.createdAt=t.createdAt-864e5*s;break;case 6:t.data.signDate=t.data.signDate-864e5*s}r.a.post("http://localhost:8090/updateuser",t).then(function(t){console.log(t),200==t.status?a.$message.success("成功"):a.$message.error("失败")})}).catch(function(){a.$message({type:"info",message:"取消输入"})})}},mounted:function(){var t=this;r.a.get("http://localhost:8090/users").then(function(e){t.users=e.data.data})}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.users,border:""}},[a("el-table-column",{attrs:{prop:"data.name",label:"昵称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.exp",label:"经验",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.point",label:"积分",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.exp",label:"等级",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.signs",label:"累计签到",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.sevenSigns",label:"连续签到",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdAt",label:"注册日期",width:"150",formatter:t.createAtDateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"signDate",label:"签到日期",width:"150",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,1)}}},[t._v("发放优惠券")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,2)}}},[t._v("发放经验")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,3)}}},[t._v("增加签到天数")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,4)}}},[t._v("发放积分")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,5)}}},[t._v("注册日期前移N天")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,6)}}},[t._v("签到日期迁移N天")])]}}])})],1)],1)},staticRenderFns:[]};var z=a("C7Lr")($,I,!1,function(t){a("GAw5")},null,null).exports,N={data:function(){return{q:"",lottoryTime:"",stores:[],events:[],dialogFormVisible:!1,event:{stores:[]},detailImage:[],type:1,links:[{value:"1",label:"快闪店"},{value:"2",label:"抽奖"},{value:"3",label:"邀请"}],deletedIds:[]}},methods:{clearDialog:function(t){console.log(t),this.event={stores:[]},this.deletedIds=[]},handleRemove:function(t,e){this.event.stores.splice(e,1),this.deletedIds.push(t._id)},handleClick:function(t){this.event.stores||(this.event.stores=[]),console.log(t),this.event.stores.push(t)},search:function(){var t=this,e=c.Loading.service({fullscreen:!0});r.a.post("http://localhost:8090/stores",{q:this.q,currentPage:1,pageSize:5}).then(function(a){t.stores=a.data.data,e.close()})},addEvent:function(){this.dialogFormVisible=!0,this.type=1},doAddEvent:function(t){var e=this,a=c.Loading.service({fullscreen:!0});if(this.event.title)if(this.event.index)if(this.event.image)if(0!=this.detailImage.length||0!=this.event.detailImage.length)if(this.event.btnText)if(this.event.type)if("1"!=this.event.type||this.event.stores){if("2"==this.event.type){if(!this.event.lottoryTime)return void this.$message.error("请设置开奖时间");if(!this.event.lottory1Count||!this.event.lottory2Count||!this.event.lottory3Count)return void this.$message.error("请输入各奖项人数");if(!this.event.lottory1||!this.event.lottory2||!this.event.lottory3)return void this.$message.error("请设置各奖项奖品")}1==t?(this.event.tp="eventadd",this.event.detailImage=this.detailImage,r.a.post("http://localhost:8090/eventadd",this.event).then(function(t){200==t.status?(e.$message.success("添加成功"),e.events.push(e.event),e.event={}):e.$message.error("添加失败"),e.dialogFormVisible=!1})):2==t&&(this.event.tp="eventupdate",this.event.dids=this.deletedIds,this.detailImage.length>0&&(this.event.detailImage=this.detailImage),r.a.post("http://localhost:8090/eventupdate",this.event).then(function(t){200==t.status?e.$message.success("更新成功"):e.$message.error("更新失败"),e.dialogFormVisible=!1})),this.detailImage=[],a.close()}else this.$message.error("请选择活动商家");else this.$message.error("请选择活动类型");else this.$message.error("请输入按钮文字");else this.$message.error("请上传详情图片");else this.$message.error("请上传活动图片");else this.$message.error("请填写轮播位置");else this.$message.error("请输入活动名称")},handleDelete:function(t){var e=this,a=this.events[t];a.tp="eventdelete",r.a.post("http://localhost:8090/eventdelete",a).then(function(a){200==a.status?(e.events.splice(t,1),e.$message.success("删除成功")):e.$message.error("删除失败")})},handleEdit:function(t){this.event=this.events[t],this.type=2,this.dialogFormVisible=!0},onDetailUploadSuccess:function(t){this.detailImage.push(t)},onItemUploadSuccess:function(t){this.event.image=t},submitUpload:function(t){1==t?this.$refs.item.submit():2==t&&this.$refs.itemDetail.submit()}},mounted:function(){var t=this;r.a.get("http://localhost:8090/events").then(function(e){console.log(e),t.events=e.data.data}),r.a.post("http://localhost:8090/stores",{q:"",currentPage:1,pageSize:5}).then(function(e){console.log(e.data),t.stores=e.data.data})}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.events}},[a("el-table-column",{attrs:{prop:"title",label:"活动名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"文案",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"btnText",label:"按钮文字",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"活动类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.type?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("快闪店")]):t._e(),t._v(" "),"2"===e.row.type?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("抽奖")]):t._e(),t._v(" "),"3"===e.row.type?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("邀请")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"index",label:"位置"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加活动",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.clearDialog}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("活动名称：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入活动名称",clearable:""},model:{value:t.event.title,callback:function(e){t.$set(t.event,"title",e)},expression:"event.title"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("活动文案：")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"可选",type:"textarea",clearable:""},model:{value:t.event.desc,callback:function(e){t.$set(t.event,"desc",e)},expression:"event.desc"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("位置：")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入位置",clearable:""},model:{value:t.event.index,callback:function(e){t.$set(t.event,"index",e)},expression:"event.index"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("轮播图片：")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"item",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onItemUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("详情图片：")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"itemDetail",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload",multiple:"true","on-success":t.onDetailUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(2)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("按钮文字：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"详情页按钮文字",clearable:""},model:{value:t.event.btnText,callback:function(e){t.$set(t.event,"btnText",e)},expression:"event.btnText"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("活动类型：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{filterable:"",placeholder:"活动类型"},model:{value:t.event.type,callback:function(e){t.$set(t.event,"type",e)},expression:"event.type"}},t._l(t.links,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("span",[t._v("已添加的商家")])])],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.event.stores}},[a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleRemove(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"搜索商家",clearable:""},on:{change:t.search},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"1"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '1'",e)}}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stores}},[a("el-table-column",{attrs:{prop:"storeName",label:"店铺名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("添加")])]}}])})],1)],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("开奖时间：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.event.lottoryTime,callback:function(e){t.$set(t.event,"lottoryTime",e)},expression:"event.lottoryTime"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("一等奖人数：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"人数",clearable:""},model:{value:t.event.lottory1Count,callback:function(e){t.$set(t.event,"lottory1Count",e)},expression:"event.lottory1Count"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("二等奖人数：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"人数",clearable:""},model:{value:t.event.lottory2Count,callback:function(e){t.$set(t.event,"lottory2Count",e)},expression:"event.lottory2Count"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("三等奖人数：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"人数",clearable:""},model:{value:t.event.lottory3Count,callback:function(e){t.$set(t.event,"lottory3Count",e)},expression:"event.lottory3Count"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("一等奖：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"如: 现金100元",clearable:""},model:{value:t.event.lottory1,callback:function(e){t.$set(t.event,"lottory1",e)},expression:"event.lottory1"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("二等奖：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"如: 现金50元",clearable:""},model:{value:t.event.lottory2,callback:function(e){t.$set(t.event,"lottory2",e)},expression:"event.lottory2"}})],1)],1),t._v(" "),a("el-row",{attrs:{hidden:"2"!=t.event.type},on:{"update:hidden":function(e){return t.$set(t.event,"type != '2'",e)}}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("三等奖：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"如: 现金20元",clearable:""},model:{value:t.event.lottory3,callback:function(e){t.$set(t.event,"lottory3",e)},expression:"event.lottory3"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doAddEvent(t.type)}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{icon:"el-icon-plus"},on:{click:t.addEvent}},[t._v("添加活动")])],1)},staticRenderFns:[]};var D=a("C7Lr")(N,P,!1,function(t){a("EmTe")},null,null).exports,F={data:function(){return{activeName:"first",activeNameOrder:"first",activeNameCoupon:"first",activeNameSubsidy:"first",activeNameUser:"first",financial:{},stores:[]}},methods:{handleClick:function(){},dateFormater:function(t,e){var a=t[e.property];return 0==a?"":j()(a).format("YYYY-MM-DD")}},mounted:function(){var t=this;r.a.post("http://localhost:8090/proxy",{tp:"financial"}).then(function(e){t.financial=e.data,console.log(e.data)})}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"本月总流水",name:"first"}},[a("el-table",{staticStyle:{width:"35%"},attrs:{data:t.financial.cashflow.month}},[a("el-table-column",{attrs:{prop:"in",label:"收入",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"out",label:"支出",width:"100"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"今日流水",name:"second"}},[a("el-table",{staticStyle:{width:"35%"},attrs:{data:t.financial.cashflow.day}},[a("el-table-column",{attrs:{prop:"in",label:"收入",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"out",label:"支出",width:"100"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"历史流水",name:"third"}},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:t.financial.cashflow.histories}},[a("el-table-column",{attrs:{prop:"_id",label:"日期",width:"180",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"in",label:"收入",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"out",label:"支出",width:"100"}})],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeNameOrder,callback:function(e){t.activeNameOrder=e},expression:"activeNameOrder"}},[a("el-tab-pane",{attrs:{label:"订单",name:"first"}},[a("el-table",{staticStyle:{width:"60%"},attrs:{data:t.financial.order.statistics}},[a("el-table-column",{attrs:{prop:"month",label:"本月订单数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"day",label:"今日订单数",width:"180"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"历史",name:"third"}},[a("el-table",{staticStyle:{width:"90%"},attrs:{data:t.financial.order.histories}},[a("el-table-column",{attrs:{prop:"timestamp",label:"日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"finalAmount",label:"消费金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"门店",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"coupon",label:"优惠券使用",width:"100"}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeNameCoupon,callback:function(e){t.activeNameCoupon=e},expression:"activeNameCoupon"}},[a("el-tab-pane",{attrs:{label:"优惠券",name:"first"}},[a("el-table",{staticStyle:{width:"40%"},attrs:{data:t.financial.coupon.statistics}},[a("el-table-column",{attrs:{prop:"month",label:"本月总计",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"day",label:"今日使用",width:"100"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"历史",name:"third"}},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.financial.coupon.histories}},[a("el-table-column",{attrs:{prop:"timestamp",label:"日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"coupon",label:"优惠券面额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"使用门店",width:"100"}})],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeNameSubsidy,callback:function(e){t.activeNameSubsidy=e},expression:"activeNameSubsidy"}},[a("el-tab-pane",{attrs:{label:"商家补贴",name:"first"}},[a("el-table",{staticStyle:{width:"40%"},attrs:{data:t.financial.subsidy.statistics}},[a("el-table-column",{attrs:{prop:"month",label:"本月总补贴",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"day",label:"今日补贴",width:"100"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"历史",name:"third"}},[a("el-table",{staticStyle:{width:"90%"},attrs:{data:t.financial.subsidy.histories}},[a("el-table-column",{attrs:{prop:"timestamp",label:"日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"商家门店",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"新用户名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subsidy",label:"补贴金额",width:"100"}})],1)],1)],1)],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeNameUser,callback:function(e){t.activeNameUser=e},expression:"activeNameUser"}},[a("el-tab-pane",{attrs:{label:"新增用户",name:"first"}},[a("el-table",{staticStyle:{width:"30%"},attrs:{data:t.financial.user.statistics}},[a("el-table-column",{attrs:{prop:"month",label:"本月新增",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"day",label:"今日新增",width:"180"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"历史",name:"third"}},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.financial.user.histories}},[a("el-table-column",{attrs:{prop:"createdAt",label:"日期",width:"180",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.name",label:"用户名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.firstPayStoreName",label:"首单消费门店",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data.payAmount",label:"消费金额",width:"180"}})],1)],1)],1)],1)},staticRenderFns:[]};var U=a("C7Lr")(F,T,!1,function(t){a("KWBv")},null,null).exports,L={data:function(){return{dialogFormVisible:!1,withdraws:[],histories:[],status:0,realWithdrawAmount:0,currentId:"",month:0,day:0,statuslist:[{value:0,label:"待审核"},{value:1,label:"审核中"},{value:2,label:"付款中"},{value:3,label:"已付款"}]}},methods:{dateFormater:function(t,e){var a=t[e.property];return 0==a?"":j()(a).format("YYYY-MM-DD")},handleClick:function(t){this.currentId=t._id,this.dialogFormVisible=!0},doUpdate:function(){var t=this,e={tp:"withdrawupdate",_id:this.currentId,status:this.status,realAmount:this.realWithdrawAmount};3!=this.status||this.realWithdrawAmount?r.a.post("http://localhost:8090/proxy",e).then(function(e){200==e.status?(t.$message.success("更新成功"),t.currentId="",t.dialogFormVisible=!1,t.$router.go(0)):t.$message.error("更新失败")}):this.$message.error("请输入实际打款金额")}},mounted:function(){var t=this;r.a.post("http://localhost:8090/proxy",{tp:"withdraws"}).then(function(e){t.withdraws=e.data.reqs,t.histories=e.data.histories,t.month=e.data.month,t.day=e.data.day})}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",[t._v("本月提现："+t._s(t.month))])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",[t._v("今日提现："+t._s(t.day))])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("div",[t._v("提现申请")])])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.withdraws,border:""}},[a("el-table-column",{attrs:{prop:"publishedAt",label:"申请日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"提现商家",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"商家姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankCard",label:"收款账户",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank",label:"开户行",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"提现金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"当前状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("审核中")]):t._e(),t._v(" "),2===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("付款中")]):t._e(),t._v(" "),3===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已付款")]):t._e(),t._v(" "),4===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已撤销")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("更新状态")])]}}])})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("div",[t._v("提现历史")])])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.histories,border:""}},[a("el-table-column",{attrs:{prop:"publishedAt",label:"申请日期",width:"120",formatter:t.dateFormater}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"提现商家",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"商家姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankCard",label:"收款账户",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank",label:"开户行",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"提现金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"当前状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("审核中")]):t._e(),t._v(" "),2===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("付款中")]):t._e(),t._v(" "),3===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已付款")]):t._e(),t._v(" "),4===e.row.status?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("已撤销")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,1)}}},[t._v("更新状态")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增板块",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("更新状态到：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{filterable:"",placeholder:"跳转连接"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statuslist,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("实际付款金额：")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"最后状态需要填写",clearable:""},model:{value:t.realWithdrawAmount,callback:function(e){t.realWithdrawAmount=e},expression:"realWithdrawAmount"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doUpdate}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("C7Lr")(L,q,!1,function(t){a("oYQ9")},null,null).exports,E={data:function(){return{image:"",phone:""}},methods:{checkLottory:function(){var t=this;if(this.phone){var e={tp:"checklottory",phone:this.phone},a=c.Loading.service({fullscreen:!0,text:"审核中..."});r.a.post("http://localhost:8090/proxy",e).then(function(e){if(a.close(),200==e.status){if(-1==e.data)return void t.$message.error("用户不存在");t.$message.success("通过审核")}else t.$message.error("审核失败")})}else this.$message.error("请输入手机号")},update:function(){var t=this;if(this.image){var e={tp:"homeheader",image:this.image};r.a.post("http://localhost:8090/proxy",e).then(function(e){200==e.status?t.$message.success("更新成功"):t.$message.error("更新失败")})}else this.$message.error("请上传图片")},onItemUploadSuccess:function(t){this.image=t},submitUpload:function(t){1==t?this.$refs.item.submit():2==t&&this.$refs.itemDetail.submit()}},mounted:function(){}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"title"},[t._v("Home背景图片：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"item",staticClass:"upload-demo",attrs:{action:"http://localhost:8090/upload","on-success":t.onItemUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.submitUpload(1)}}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{width:"100%"},on:{click:t.update}},[t._v("更新")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:12}},[t._v("抽奖资格审核")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"输入手机号,然后回车",clearable:""},on:{change:t.checkLottory},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{width:"100%"},on:{click:t.checkLottory}},[t._v("审核")])],1)],1)],1)},staticRenderFns:[]};var M=a("C7Lr")(E,Y,!1,function(t){a("R7Dk")},null,null).exports,A={name:"qrcodes",data:function(){return{stores:this.$route.params.stores}},methods:{downloadImage:function(t){var e=document.getElementById(this.stores[t]._id).getElementsByTagName("canvas"),a=document.createElement("a");a.href=e[0].toDataURL("image/png"),this.stores[t].storeName?a.download=j()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t].storeName:a.download=j()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t]._id,a.click()},downloadAll:function(){for(var t=0;t<this.stores.length;t++){var e=document.getElementById(this.stores[t]._id).getElementsByTagName("canvas"),a=document.createElement("a");a.href=e[0].toDataURL("image/png"),this.stores[t].storeName?a.download=j()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t].storeName:a.download=j()(this.stores[t].createdAt).format("YYYYMMDDHHMMSS")+"-"+t+"-"+this.stores[t]._id,a.click()}}},mounted:function(){for(var t=0;t<this.stores.length;t++)new w.a(this.stores[t]._id,{width:150,height:150,text:this.stores[t]._id})}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{on:{click:t.downloadAll}},[t._v("一键下载")]),t._v(" "),a("div",{staticClass:"qrcode"},t._l(t.stores,function(e,l){return a("div",{staticClass:"qrcodeItem"},[a("div",{ref:e._id,refInFor:!0,attrs:{id:e._id}}),t._v(" "),a("div",[a("span",[t._v(t._s(l)+"-")]),t._v(" "),a("span",[t._v(t._s(e.storeName))]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downloadImage(l)}}},[t._v("下载")])],1)])}),0)],1)},staticRenderFns:[]};var H=a("C7Lr")(A,B,!1,function(t){a("nvE0")},null,null).exports;l.default.use(n.a);var R=new n.a({routes:[{path:"/components/plates",name:"plates",component:v},{path:"/components/coupons",name:"coupons",component:b},{path:"/components/pubstores",name:"pubstores",component:g},{path:"/components/stores",name:"stores",component:C},{path:"/components/users",name:"users",component:z},{path:"/components/events",name:"events",component:D},{path:"/components/finance",name:"finance",component:U},{path:"/components/withdraws",name:"withdraws",component:V},{path:"/components/others",name:"others",component:M},{path:"/components/qrcodes",name:"qrcodes",component:H}]}),O=a("Ginn"),Q=a.n(O);a("gFLX");l.default.use(u.a),l.default.use(Q.a,{ak:"ovhQnjcwKnMYLlBo2eMBzPAb"}),l.default.config.productionTip=!1,new l.default({el:"#app",router:R,components:{App:o},template:"<App/>"})},"OLe+":function(t,e){},R7Dk:function(t,e){},gFLX:function(t,e){},hbz1:function(t,e){},nvE0:function(t,e){},oYQ9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7ae46253252282946124.js.map